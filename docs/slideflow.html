

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Source &mdash; slideflow 1.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Appendix" href="appendix.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="root.html" class="icon icon-home"> slideflow
          

          
          </a>

          
            
            
              <div class="version">
                1.11
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Pipeline Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="project.html">Setting up a Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="extract_tiles.html">Tile extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="training.html">Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="activations.html">Layer activations</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#slideflowproject">SlideflowProject</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-slideflow.activations">activations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-slideflow.io">io</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-slideflow.io.tfrecords">io.tfrecords</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-slideflow.model">model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-slideflow.slide">slide</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-slideflow.mosaic">mosaic</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-slideflow.statistics">statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-slideflow.util">util</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-slideflow.experimental">experimental</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="root.html">slideflow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="root.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Source</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/slideflow.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="source">
<h1>Source<a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h1>
<div class="section" id="slideflowproject">
<h2>SlideflowProject<a class="headerlink" href="#slideflowproject" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.project.</span></span><span class="sig-name descname"><span class="pre">SlideflowProject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse_select_gpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interactive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">64</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse_select_gpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interactive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">64</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes project by creating project folder, prompting user for project settings, and project
settings to “settings.json” within the project directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>project_folder</strong> – Project folder</p></li>
<li><p><strong>gpu_pool</strong> – Number of available GPUs. Will try to autoselect GPU if provided</p></li>
<li><p><strong>reverse_select_gpu</strong> – Will try to select GPU from available pool in reverse</p></li>
<li><p><strong>gpu</strong> – Int, forces GPU selection to the indicated GPU number.</p></li>
<li><p><strong>interactive</strong> – Bool, if true, will solicit project information from the user
via text prompts if if the project has not yet been initialized</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.add_dataset">
<span class="sig-name descname"><span class="pre">add_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slides</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfrecords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.add_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a dataset to the dataset configuration file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Dataset name.</p></li>
<li><p><strong>slides</strong> – Path to directory containing slides.</p></li>
<li><p><strong>roi</strong> – Path to directory containing CSV ROIs.</p></li>
<li><p><strong>tiles</strong> – Path to directory in which to store extracted tiles.</p></li>
<li><p><strong>tfrecords</strong> – Path to directory in which to store TFRecords of extracted tiles.</p></li>
<li><p><strong>path</strong> – (optional) Path to dataset configuration file. If not provided, uses project default.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.annotations">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">annotations</span></span><a class="headerlink" href="#slideflow.project.SlideflowProject.annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to annotations file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.associate_slide_names">
<span class="sig-name descname"><span class="pre">associate_slide_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.associate_slide_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Funtion to automatically associate patient names with slide filenames in the annotations file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.autoselect_gpu">
<span class="sig-name descname"><span class="pre">autoselect_gpu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number_available</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.autoselect_gpu" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically claims a free GPU.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number_available</strong> – Total number of GPUs available to select from</p></li>
<li><p><strong>reverse</strong> – Bool, if True, will select GPU from pool in reverse</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.create_blank_annotations_file">
<span class="sig-name descname"><span class="pre">create_blank_annotations_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.create_blank_annotations_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an example blank annotations file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.create_blank_train_config">
<span class="sig-name descname"><span class="pre">create_blank_train_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.create_blank_train_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a CSV file with the batch training hyperparameter structure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.create_hyperparameter_sweep">
<span class="sig-name descname"><span class="pre">create_hyperparameter_sweep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finetune_epochs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.create_hyperparameter_sweep" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares a hyperparameter sweep, saving to a batch train TSV file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.create_project">
<span class="sig-name descname"><span class="pre">create_project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project_folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.create_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompts user to provide all relevant project configuration and saves configuration to “settings.json”.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.dataset_config">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dataset_config</span></span><a class="headerlink" href="#slideflow.project.SlideflowProject.dataset_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to dataset configuration JSON file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_label_headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hyperparameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_k_fold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permutation_importance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">histogram</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_predictions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates a saved model on a given set of tfrecords.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Path to Tensorflow model to evaluate.</p></li>
<li><p><strong>outcome_label_headers</strong> – Annotation column header that specifies the outcome label(s).</p></li>
<li><p><strong>hyperparameters</strong> – Path to model’s hyperparameters.json file. If None (default), searches for this file in the same directory as the model.</p></li>
<li><p><strong>filters</strong> – Filters to use when selecting tfrecords on which to perform evaluation.</p></li>
<li><p><strong>checkpoint</strong> – Path to cp.ckpt file to load, if evaluating a saved checkpoint.</p></li>
<li><p><strong>eval_k_fold</strong> – K-fold iteration number to evaluate. If None, will evaluate all tfrecords irrespective of K-fold.</p></li>
<li><p><strong>max_tiles_per_slide</strong> – Will only use up to this many tiles from each slide for evaluation. If zero, will include all tiles.</p></li>
<li><p><strong>min_tiles_per_slide</strong> – Minimum number of tiles a slide must have to be included in evaluation. Default is 0, but
for best slide-level AUC, a minimum of at least 10 tiles per slide is recommended.</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles.</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image.</p></li>
<li><p><strong>input_header</strong> – Annotation column header to use as additional input to the model.</p></li>
<li><p><strong>permutation_importance</strong> – Bool. True if you want to calculate the permutation feature importance (used to determine relative importance when using multiple model inputs</p></li>
<li><p><strong>histogram</strong> – Bool. If true, will create tile-level histograms to show prediction distributions for each class.</p></li>
<li><p><strong>save_predictions</strong> – Either True, False, or a list with any combination of ‘tile’, ‘patient’, or ‘slide’.
Will save tile-level, patient-level, and/or slide-level predictions.
If True, will save all.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.evaluate_clam">
<span class="sig-name descname"><span class="pre">evaluate_clam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exp_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pt_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_label_headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attention_heatmaps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.evaluate_clam" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate CLAM model on saved feature activations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exp_name</strong> – Name of experiemnt to evaluate (directory in clam/ subfolder)</p></li>
<li><p><strong>pt_files</strong> – Path to pt_files containing tile-level features.</p></li>
<li><p><strong>outcome_label_headers</strong> – Name in annotation column which specifies the outcome label.</p></li>
<li><p><strong>tile_px</strong> – Tile width in pixels.</p></li>
<li><p><strong>tile_um</strong> – Tile width in microns.</p></li>
<li><p><strong>eval_tag</strong> – Unique identifier for this evaluation.</p></li>
<li><p><strong>filters</strong> – Dictionary of column names mapping to column values by which to filter slides using the annotation file.
Used if train_slides and validation_slides are ‘auto’.</p></li>
<li><p><strong>filter_blank</strong> – List of annotations headers; slides blank in this column will be excluded.
Used if train_slides and validation_slides are ‘auto’.</p></li>
<li><p><strong>attention_heatmaps</strong> – Bool. If true, will save attention heatmaps of validation dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.extract_tiles">
<span class="sig-name descname"><span class="pre">extract_tiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_core</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_tiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_tfrecord</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inside'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_missing_roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_extracted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">230</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayspace_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayspace_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'png'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomize_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threads_per_worker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.extract_tiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract tiles from a group of slides; save a percentage of tiles for validation testing if the
validation target is ‘per-patient’; and generate TFRecord files from the raw images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tile_px</strong> – Tile size in pixels.</p></li>
<li><p><strong>tile_um</strong> – Tile size in microns.</p></li>
<li><p><strong>filters</strong> – Dataset filters to use when selecting slides for tile extraction.</p></li>
<li><p><strong>stride_div</strong> – Stride divisor to use when extracting tiles. A stride of 1 will extract non-overlapping tiles.
A stride_div of 2 will extract overlapping tiles, with a stride equal to 50% of the tile width.</p></li>
<li><p><strong>tma</strong> – Bool. If True, reads slides as Tumor Micro-Arrays (TMAs), detecting and extracting tumor cores.</p></li>
<li><p><strong>full_core</strong> – Bool. Only used if extracting from TMA. If True, will save entire TMA core as image. Otherwise, will extract sub-images
from each core using the given tile micron size.</p></li>
<li><p><strong>save_tiles</strong> – Bool. If True, will save JPEG images of extracted tiles to corresponding tile directory.</p></li>
<li><p><strong>save_tfrecord</strong> – Bool. If True, will save JPEG-compressed image data from extracted tiles into TFRecords in the corresponding TFRecord directory.</p></li>
<li><p><strong>enable_downsample</strong> – Bool. If True, enables the use of downsampling while reading slide images. This may result in corrupted image tiles
if downsampled slide layers are corrupted or not fully generated. Manual confirmation of tile integrity is recommended.</p></li>
<li><p><strong>roi_method</strong> – Either ‘inside’, ‘outside’, or ‘ignore’. Whether to extract tiles inside or outside the ROIs.</p></li>
<li><p><strong>skip_missing_roi</strong> – Bool. If True, will skip slides that are missing ROIs</p></li>
<li><p><strong>skip_extracted</strong> – Bool. If True, will skip slides that have already been fully extracted</p></li>
<li><p><strong>dataset</strong> – Name of dataset from which to select slides for extraction. If not provided, will default to all datasets in project</p></li>
<li><p><strong>validation_settings</strong> – Namespace of validation settings as provided by sf.project.get_validation_settings().
Necessary if performing per-tile validation. If not provided, will ignore.</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
<li><p><strong>whitespace_fraction</strong> – Float 0-1. Fraction of whitespace which causes a tile to be discarded. If 1, will not perform whitespace filtering.</p></li>
<li><p><strong>whitespace_threshold</strong> – Int 0-255. Threshold above which a pixel (averaged across R,G,B) is considered whitespace.</p></li>
<li><p><strong>grayspace_fraction</strong> – Float 0-1. Fraction of grayspace which causes a tile to be discarded. If 1, will not perform grayspace filtering.</p></li>
<li><p><strong>grayspace_threshold</strong> – Int 0-1. HSV (hue, saturation, value) is calculated for each pixel. If a pixel’s saturation is below this threshold, it is considered grayspace.</p></li>
<li><p><strong>img_format</strong> – ‘png’ or ‘jpg’. Format of images for internal storage in tfrecords. PNG (lossless) format recommended for fidelity, JPG (lossy) for space efficiency.</p></li>
<li><p><strong>randomize_origin</strong> – Bool. If true, will slightly randomize the exact pixel starting position during tile extraction.</p></li>
<li><p><strong>buffer</strong> – Either ‘vmtouch’ or path to directory. If vmtouch, will use vmtouch to preload slide into memory before extraction.
If a directory, slides will be copied to the directory as a buffer before extraction.
Either method vastly improves tile extraction for slides on HDDs by maximizing sequential read speed</p></li>
<li><p><strong>shuffle</strong> – Bool. If true (default), will shuffle tiles in tfrecords.</p></li>
<li><p><strong>num_workers</strong> – Number of slides from which to be extracting tiles simultaneously.</p></li>
<li><p><strong>threads_per_worker</strong> – Number of processes to allocate to each slide for tile extraction.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.extract_tiles_from_tfrecords">
<span class="sig-name descname"><span class="pre">extract_tiles_from_tfrecords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.extract_tiles_from_tfrecords" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts all tiles from a set of TFRecords.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tile_px</strong> – Tile size in pixels</p></li>
<li><p><strong>tile_um</strong> – Tile size in microns</p></li>
<li><p><strong>destination</strong> – Destination folder in which to save tile images</p></li>
<li><p><strong>filters</strong> – Dataset filters to use when selecting TFRecords</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.generate_activations">
<span class="sig-name descname"><span class="pre">generate_activations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_label_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['postconv']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activations_export</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activations_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_logits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">torch_export</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isolated_process</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.generate_activations" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates final layer activations and displays information regarding the most significant final layer nodes.
Note: GPU memory will remain in use, as the Keras model associated with the visualizer is active.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Path to Tensorflow model</p></li>
<li><p><strong>outcome_label_headers</strong> – (optional) Column header in annotations file; used for category-level comparisons</p></li>
<li><p><strong>layers</strong> – Layers from which to generate activations.</p></li>
<li><p><strong>filters</strong> – Dataset filters for selecting TFRecords</p></li>
<li><p><strong>filter_blank</strong> – List of label headers; slides that have blank entries in this label header
in the annotations file will be excluded</p></li>
<li><p><strong>focus_nodes</strong> – List of int, indicates which nodes are of interest for subsequent analysis</p></li>
<li><p><strong>activations_export</strong> – Path to CSV file, if provided, will save activations in CSV format to this file</p></li>
<li><p><strong>activations_cache</strong> – Either ‘default’ or path to ‘PKL’ file; will save activations to this file in PKL format as cache</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
<li><p><strong>max_tiles_per_slide</strong> – Int. If &gt; 0, will only take this many tiles per slide.</p></li>
<li><p><strong>min_tiles_per_slide</strong> – Int. If &gt; 0, will skip slides with fewer than this many tiles.</p></li>
<li><p><strong>model_format</strong> – Optional. May supply format of saved Slideflow Keras model if the model was made with a legacy version.
Default value will be slideflow.model.MODEL_FORMAT_CURRENT,
but slideflow.model.MODEL_FORMAT_LEGACY may be supplied.</p></li>
<li><p><strong>include_logits</strong> – If true, will also generate logit predictions along with layer activations.</p></li>
<li><p><strong>batch_size</strong> – Batch size to use when calculating activations.</p></li>
<li><p><strong>torch_export</strong> – Path. If true, will export activations to torch-compatible file in this location.</p></li>
<li><p><strong>isolated_process</strong> – Bool. If true, will run in an isolated process (multiprocessing), allowing GPU memory to be freed after completion, and return None.
If false, will return the ActivationsVisualizer object after completion.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.generate_features_for_clam">
<span class="sig-name descname"><span class="pre">generate_features_for_clam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activation_layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['postconv']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_regenerate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.generate_features_for_clam" title="Permalink to this definition">¶</a></dt>
<dd><p>Using the specified model, generates tile-level features for slides for use with CLAM.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Path to model from which to generate activations. May provide either this or “pt_files”</p></li>
<li><p><strong>export_dir</strong> – Path in which to save exported activations in .pt format. If ‘auto’, will save in project directory.</p></li>
<li><p><strong>activation_layers</strong> – Which model layer(s) from which to generate activations.</p></li>
<li><p><strong>max_tiles_per_slide</strong> – Maximum number of tiles to take per slide</p></li>
<li><p><strong>min_tiles_per_slide</strong> – Minimum number of tiles per slide. Will skip slides not meeting this threshold.</p></li>
<li><p><strong>filters</strong> – Dictionary of column names mapping to column values by which to filter slides using the annotation file.</p></li>
<li><p><strong>filter_blank</strong> – List of annotations headers; slides blank in this column will be excluded.</p></li>
<li><p><strong>force_regenerate</strong> – If true, will generate activations for all slides. If false, will skip slides that
already have a .pt file in the export directory.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to directory containing exported .pt files</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.generate_heatmaps">
<span class="sig-name descname"><span class="pre">generate_heatmaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'low'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inside'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logit_cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isolated_thread</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.generate_heatmaps" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates predictive heatmap overlays on a set of slides.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Path to Tensorflow model with which predictions will be generated.</p></li>
<li><p><strong>filters</strong> – Dataset filters to use when selecting slides for which to generate heatmaps.</p></li>
<li><p><strong>filter_blank</strong> – List of label headers; slides that have blank entries in this label header
in the annotations file will be excluded</p></li>
<li><p><strong>directory</strong> – Directory in which to save heatmap images.</p></li>
<li><p><strong>resolution</strong> – Heatmap resolution (determines stride of tile predictions).
“low” uses a stride equal to tile width.
“medium” uses a stride equal 1/2 tile width.
“high” uses a stride equal to 1/4 tile width.</p></li>
<li><p><strong>interpolation</strong> – Interpolation strategy for smoothing heatmap predictions (matplotlib imshow interpolation options).</p></li>
<li><p><strong>show_roi</strong> – Bool. If True, will show ROI on heatmaps.</p></li>
<li><p><strong>roi_method</strong> – ‘inside’, ‘outside’, or ‘none’. Determines where heatmap should be made with respect to annotated ROI.</p></li>
<li><p><strong>logit_cmap</strong> – <p>Either a function or a dictionary used to create heatmap colormap.
If None (default), separate heatmaps will be generated for each label category, with color representing likelihood of category prediction.
Each image tile will generate a list of predictions of length O,
where O is the number of label categories.
If logit_cmap is a function, then this logit prediction list will be passed to the function,
and the function is expected to return [R, G, B] values which will be displayed. isolated_thread must be true if a function is passed.
If the logit_cmap is a dictionary, it should map ‘r’, ‘g’, and ‘b’ to label indices;
The prediction for these label categories will be mapped to the corresponding colors.
Thus, the corresponding color will only reflect predictions of up to three label categories.</p>
<blockquote>
<div><p>Example (this would map prediction for label 0 to the red colorspace, label 3 to green colorspace, etc):
{‘r’: 0, ‘g’: 3, ‘b’: 1 }</p>
</div></blockquote>
</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
<li><p><strong>buffer</strong> – Either ‘vmtouch’ or path to directory. If vmtouch, will use vmtouch to preload slide into memory before extraction.
If a directory, slides will be copied to the directory as a buffer before extraction.
Either method vastly improves tile extraction for slides on HDDs by maximizing sequential read speed</p></li>
<li><p><strong>isolated_thread</strong> – Bool. If True, will wrap function in separate process, allowing GPU memory to be freed after completion.
If False, will perform as single thread (GPU memory may not be freed after completion).
Allows use for functions being passed to logit_cmap (functions are not pickleable).</p></li>
<li><p><strong>model_format</strong> – Optional. May supply format of saved Slideflow Keras model if the model was made with a legacy version.
Default value will be slideflow.model.MODEL_FORMAT_CURRENT,
but slideflow.model.MODEL_FORMAT_LEGACY may be supplied.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.generate_mosaic">
<span class="sig-name descname"><span class="pre">generate_mosaic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mosaic_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">umap_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_label_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['postconv']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'low'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tiles_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expanded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_prediction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restrict_prediction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predict_on_axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_on_axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">umap_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activations_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activations_export</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">umap_export</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_float</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low_memory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.generate_mosaic" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Generates a mosaic map by overlaying images onto a set of mapped tiles.</dt><dd><p>Image tiles are extracted from the provided set of TFRecords, and predictions + post-convolutional node activations are calculated using the specified model.
Tiles are mapped either with dimensionality reduction on post-convolutional layer activations (default behavior),
or by using outcome predictions for two categories, mapped to X- and Y-axis (via predict_on_axes).</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Path to Tensorflow model to use when generating layer activations.</p></li>
<li><p><strong>mosaic_filename</strong> – Filename for mosaic image. If not provided, mosaic will not be calculated or saved. Will be saved in project mosaic directory.</p></li>
<li><p><strong>umap_filename</strong> – Filename for UMAP plot image. If not provided, plot will not be saved. Will be saved in project stats directory.</p></li>
<li><p><strong>outcome_label_headers</strong> – Column name in annotations file from which to read category labels.</p></li>
<li><p><strong>filters</strong> – Dataset filters to use when selecting slides to include the mosaic.</p></li>
<li><p><strong>filter_blank</strong> – List of label headers; slides that have blank entries in this label header
in the annotations file will be excluded</p></li>
<li><p><strong>focus_filters</strong> – Dataset filters to use when selecting slides to highlight on the mosaic.</p></li>
<li><p><strong>resolution</strong> – Resolution of the mosaic map. Impacts size of the final figure. Either low, medium, or high.</p></li>
<li><p><strong>num_tiles_x</strong> – Specifies the size of the mosaic map grid.</p></li>
<li><p><strong>max_tiles_per_slide</strong> – Limits the number of tiles taken from each slide. Too high of a number may introduce memory issues.</p></li>
<li><p><strong>expanded</strong> – Bool. If False, will limit tile assignment to the corresponding grid space (strict display).
If True, allows for display of nearby tiles if a given grid is empty.</p></li>
<li><p><strong>map_slide</strong> – None (default), ‘centroid’, or ‘average’. If provided, will map slides using slide-level calculations, either mapping centroid tiles if ‘centroid’,
or calculating node averages across all tiles in a slide and mapping slide-level node averages, if ‘average’</p></li>
<li><p><strong>show_prediction</strong> – May be either int or string, corresponding to label category. Predictions for this category will be displayed
On the exported UMAP plot.</p></li>
<li><p><strong>restrict_prediction</strong> – List of int, if provided, will restrict predictions to only these categories
(final tile-level prediction is made by choosing category with highest logit)</p></li>
<li><p><strong>predict_on_axes</strong> – (int, int). Each int corresponds to an label category id.
If provided, predictions are generated for these two labels categories;
tiles are then mapped with these predictions with the pattern (x, y)
and the mosaic is generated from this map. This replaces the default
dimensionality reduction mapping.</p></li>
<li><p><strong>label_names</strong> – Dict mapping label id (int) to string names. Saved in the hyperparameters file as “outcome_labels”</p></li>
<li><p><strong>cmap</strong> – Colormap mapping labels to colors for display on UMAP plot</p></li>
<li><p><strong>model_type</strong> – Indicates label type. May be ‘categorical’, ‘linear’, or ‘cph’ (Cox Proportional Hazards)</p></li>
<li><p><strong>umap_cache</strong> – Either ‘default’ or path to PKL file in which to save/cache UMAP coordinates</p></li>
<li><p><strong>activations_cache</strong> – Either ‘default’ or path to PKL file in which to save/cache nodal activations</p></li>
<li><p><strong>activations_export</strong> – Filename for CSV export of activations. Will be saved in project stats directory.</p></li>
<li><p><strong>umap_export</strong> – Filename for CSV export of UMAP coordinates. Will be saved in project stats directory.</p></li>
<li><p><strong>use_float</strong> – Bool, if True, assumes labels are float / linear (as opposed to categorical)</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
<li><p><strong>low_memory</strong> – Bool, if True, will attempt to limit memory during UMAP calculations at the cost of increased computational complexity</p></li>
<li><p><strong>model_format</strong> – Optional. May supply format of saved Slideflow Keras model if the model was made with a legacy version.
Default value will be slideflow.model.MODEL_FORMAT_CURRENT,
but slideflow.model.MODEL_FORMAT_LEGACY may be supplied.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.generate_mosaic_from_annotations">
<span class="sig-name descname"><span class="pre">generate_mosaic_from_annotations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header_x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header_y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mosaic_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">umap_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_label_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'low'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tiles_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expanded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_optimal_tile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activations_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.generate_mosaic_from_annotations" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Generates a mosaic map by overlaying images onto a set of mapped tiles.</dt><dd><p>Slides are mapped using slide-level annotations, with x-axis value determined from header_x, and y-axis from header_y.
If use_optimal_tile is False and no model is provided, the first image tile in a slide’s TFRecord is used for display.
If optimal_tile is True, post-convolutional layer activations for all tiles in each slide are calculated using the provided model,
and the tile nearest to centroid is used for display.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>header_x</strong> – Column name in annotations file from which to read X-axis coordinates.</p></li>
<li><p><strong>header_y</strong> – Column name in annotations file from which to read Y-axis coordinates.</p></li>
<li><p><strong>tile_px</strong> – Tile size in pixels.</p></li>
<li><p><strong>tile_um</strong> – Tile size in microns.</p></li>
<li><p><strong>model</strong> – Path to Tensorflow model to use when generating layer activations.</p></li>
<li><p><strong>mosaic_filename</strong> – Filename for mosaic image. If not provided, mosaic will not be calculated or saved. Will be saved in project mosaic directory.</p></li>
<li><p><strong>umap_filename</strong> – Filename for UMAP plot image. If not provided, plot will not be saved. Will be saved in project stats directory.</p></li>
<li><p><strong>outcome_label_headers</strong> – Column name in annotations file from which to read category labels.</p></li>
<li><p><strong>filters</strong> – Dataset filters to use when selecting slides to include the mosaic.</p></li>
<li><p><strong>focus_filters</strong> – Dataset filters to use when selecting slides to highlight on the mosaic.</p></li>
<li><p><strong>resolution</strong> – Resolution of the mosaic map. Impacts size of the final figure. Either low, medium, or high.</p></li>
<li><p><strong>num_tiles_x</strong> – Specifies the size of the mosaic map grid.</p></li>
<li><p><strong>max_tiles_per_slide</strong> – Limits the number of tiles taken from each slide. Too high of a number may introduce memory issues.</p></li>
<li><p><strong>expanded</strong> – Bool. If False, will limit tile assignment to the corresponding grid space (strict display).
If True, allows for display of nearby tiles if a given grid is empty.</p></li>
<li><p><strong>use_optimal_tile</strong> – Bool. If True, will use model to create post-convolutional layer activations for all tiles in each slide,
and choosing tile nearest to centroid for each slide for display.</p></li>
<li><p><strong>activations_cache</strong> – Either ‘default’ or path to PKL file in which to save/cache nodal activations</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
<li><p><strong>model_format</strong> – Optional. May supply format of saved Slideflow Keras model if the model was made with a legacy version.
Default value will be slideflow.model.MODEL_FORMAT_CURRENT,
but slideflow.model.MODEL_FORMAT_LEGACY may be supplied.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.generate_tfrecord_heatmap">
<span class="sig-name descname"><span class="pre">generate_tfrecord_heatmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tfrecord</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.generate_tfrecord_heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a tfrecord-based WSI heatmap using a dictionary of tile values for heatmap display.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tfrecord</strong> – Path to tfrecord</p></li>
<li><p><strong>tile_dict</strong> – Dictionary mapping tfrecord indices to a tile-level value for display in heatmap format</p></li>
<li><p><strong>export_dir</strong> – Path to directory in which to save images</p></li>
<li><p><strong>tile_px</strong> – Tile width in pixels</p></li>
<li><p><strong>tile_um</strong> – Tile width in microns</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary mapping slide names to dict of statistics (mean, median, above_0, and above_1)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.generate_tfrecords_from_tiles">
<span class="sig-name descname"><span class="pre">generate_tfrecords_from_tiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_tiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.generate_tfrecords_from_tiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Create tfrecord files from a collection of raw images, as stored in project tiles directory</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.generate_thumbnails">
<span class="sig-name descname"><span class="pre">generate_thumbnails</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">512</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.generate_thumbnails" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates square slide thumbnails with black box borders of a fixed size, and saves to project folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> – Int. Width/height of thumbnail in pixels.</p></li>
<li><p><strong>filters</strong> – Dataset filters.</p></li>
<li><p><strong>filter_blank</strong> – Header columns in annotations by which to filter slides, if the slides are blank in this column.</p></li>
<li><p><strong>roi</strong> – Bool. If True, will include ROI in the thumbnail images.</p></li>
<li><p><strong>enable_downsample</strong> – Bool. If True and a thumbnail is not embedded in the slide file, downsampling is permitted in order
to accelerate thumbnail calculation.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.get_dataset">
<span class="sig-name descname"><span class="pre">get_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_px</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verification</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'both'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.get_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns slideflow.io.Dataset object using project settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tile_px</strong> – Tile size in pixels</p></li>
<li><p><strong>tile_um</strong> – Tile size in microns</p></li>
<li><p><strong>filters</strong> – Dictionary of annotations filters to use when selecting slides/TFRecords to include in dataset</p></li>
<li><p><strong>filter_blank</strong> – List of label headers; will only include slides that are not blank in these headers</p></li>
<li><p><strong>verification</strong> – ‘tfrecords’, ‘slides’, or ‘both’. If ‘slides’, will verify all annotations are mapped to slides.
If ‘tfrecords’, will check that TFRecords exist and update manifest</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.load_datasets">
<span class="sig-name descname"><span class="pre">load_datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.load_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads datasets dictionaries from a given datasets.json file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.load_project">
<span class="sig-name descname"><span class="pre">load_project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.load_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a saved and pre-configured project from the specified directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.predict_wsi">
<span class="sig-name descname"><span class="pre">predict_wsi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inside'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_missing_roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">230</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayspace_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayspace_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomize_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.predict_wsi" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Using a given model, generates a spatial map of tile-level predictions for a whole-slide image (WSI) and dumps</dt><dd><p>prediction arrays into pkl files for later use.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_path</strong> – Path to model from which to generate predictions.</p></li>
<li><p><strong>tile_px</strong> – Tile size in pixels.</p></li>
<li><p><strong>tile_um</strong> – Tile size in microns.</p></li>
<li><p><strong>export_dir</strong> – Path to export directory in which to save .pkl files.</p></li>
<li><p><strong>filters</strong> – Annotations filters to use when selecting slides.</p></li>
<li><p><strong>filter_blank</strong> – Filter out slides blank in this annotations column.</p></li>
<li><p><strong>stride_div</strong> – Stride divisor when extracting tiles from a whole slide image.</p></li>
<li><p><strong>enable_downsample</strong> – Bool. If true, enables tile extraction from downsampled pyramids in slide images.
May result in corrupted images for some slides.</p></li>
<li><p><strong>roi_method</strong> – None, ‘inside’, or ‘outside’. How to extract tiles wrt. annoted ROIs.</p></li>
<li><p><strong>skip_missing_roi</strong> – Bool. If true, will skip slides with missing ROIs.</p></li>
<li><p><strong>dataset</strong> – Name of dataset from which to get slides. If None, will use project default.</p></li>
<li><p><strong>normalizer</strong> – Name of normalizer to use for tiles.</p></li>
<li><p><strong>normalizer_source</strong> – Path to image tile to use as reference for normalizer. If None, will use internal default reference tile.</p></li>
<li><p><strong>whitespace_fraction</strong> – Float 0-1. Fraction of whitespace which causes a tile to be discarded. If 1, will not perform whitespace filtering.</p></li>
<li><p><strong>whitespace_threshold</strong> – Int 0-255. Threshold above which a pixel (averaged across R,G,B) is considered whitespace.</p></li>
<li><p><strong>grayspace_fraction</strong> – Float 0-1. Fraction of grayspace which causes a tile to be discarded. If 1, will not perform grayspace filtering.</p></li>
<li><p><strong>grayspace_threshold</strong> – Int 0-1. HSV (hue, saturation, value) is calculated for each pixel. If a pixel’s saturation is below this threshold, it is considered grayspace.</p></li>
<li><p><strong>randomize_origin</strong> – Bool. If true, will slightly randomize the pixel origin for the tile extraction grid on each slide.</p></li>
<li><p><strong>buffer</strong> – Path to buffer directory in which to copy slides prior to extraction.
Using a ramdisk buffer greatly improves tile extraction speed for slides stored on disks with slow random access.</p></li>
<li><p><strong>num_threads</strong> – Number of processes to use when generating predictions. If 1, will not use multiprocessing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.resize_tfrecords">
<span class="sig-name descname"><span class="pre">resize_tfrecords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.resize_tfrecords" title="Permalink to this definition">¶</a></dt>
<dd><p>Resizes images in a set of TFRecords to a given pixel size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_tile_px</strong> – Pixel size of source images. Used to select source TFRecords.</p></li>
<li><p><strong>source_tile_um</strong> – Micron size of source images. Used to select source TFRecords.</p></li>
<li><p><strong>dest_tile_px</strong> – Pixel size of resized images.</p></li>
<li><p><strong>filters</strong> – Dictionary of dataset filters to use for selecting TFRecords for resizing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.root">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">root</span></span><a class="headerlink" href="#slideflow.project.SlideflowProject.root" title="Permalink to this definition">¶</a></dt>
<dd><p>Path root directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.save_project">
<span class="sig-name descname"><span class="pre">save_project</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.save_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves current project configuration as “settings.json”.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.select_gpu">
<span class="sig-name descname"><span class="pre">select_gpu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gpu</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.select_gpu" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets environmental variables such that the indicated GPU is used by CUDA/Tensorflow.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.slide_report">
<span class="sig-name descname"><span class="pre">slide_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inside'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_missing_roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.slide_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a PDF report of slides, including images of 10 example extracted tiles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tile_px</strong> – Tile width in pixels</p></li>
<li><p><strong>tile_um</strong> – Tile width in microns</p></li>
<li><p><strong>filters</strong> – Dataset filters to use for selecting TFRecords</p></li>
<li><p><strong>filter_blank</strong> – List of label headers; slides that have blank entries in this label header
in the annotations file will be excluded</p></li>
<li><p><strong>dataset</strong> – Name of dataset from which to select TFRecords. If not provided, will use all project datasets</p></li>
<li><p><strong>stride_div</strong> – Stride divisor for tile extraction</p></li>
<li><p><strong>destination</strong> – Either ‘auto’ or explicit filename at which to save the PDF report</p></li>
<li><p><strong>tma</strong> – Bool, if True, interprets slides to be TMA (tumor microarrays)</p></li>
<li><p><strong>enable_downsample</strong> – Bool, if True, enables downsampling during tile extraction</p></li>
<li><p><strong>roi_method</strong> – Either ‘inside’, ‘outside’, or ‘ignore’. Determines how ROIs will guide tile extraction</p></li>
<li><p><strong>skip_missing_roi</strong> – Bool, if True, will skip tiles that are missing ROIs</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.tfrecord_report">
<span class="sig-name descname"><span class="pre">tfrecord_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.tfrecord_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a PDF report of TFRecords, including 10 example tiles per TFRecord.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tile_px</strong> – Tile width in pixels</p></li>
<li><p><strong>tile_um</strong> – Tile width in microns</p></li>
<li><p><strong>filters</strong> – Dataset filters to use for selecting TFRecords</p></li>
<li><p><strong>filter_blank</strong> – List of label headers; slides that have blank entries in this label header
in the annotations file will be excluded</p></li>
<li><p><strong>dataset</strong> – Optional. Name of dataset from which to generate reports. Defaults to all project datasets.</p></li>
<li><p><strong>destination</strong> – Either ‘auto’ or explicit filename at which to save the PDF report</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_label_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'category'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resume_training</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pretrain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'imagenet'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pretrain_model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hyperparameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_epoch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">steps_per_epoch_override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_extract</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tfrecord'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_tensorboard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_gpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_predictions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Train model(s).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_names</strong> – Either a string representing a model name, or an array of strings containing multiple model names.
Required if training to a single hyperparameter combination with the “hyperparameters” argument.
If performing a hyperparameter sweep, will only train models with these names in the batch_train.tsv config file.
May supply None if performing a hyperparameter sweep, in which case all models in the batch_train.tsv config file will be trained.</p></li>
<li><p><strong>outcome_label_headers</strong> – String or list. Specifies which header(s) in the annotation file to use for the output category.
Defaults to ‘category’. If a list is provided, will loop through all outcomes and perform HP sweep on each.</p></li>
<li><p><strong>filters</strong> – Dictionary of column names mapping to column values by which to filter slides using the annotation file.</p></li>
<li><p><strong>resume_training</strong> – Path to Tensorflow model to continue training</p></li>
<li><p><strong>checkpoint</strong> – Path to cp.ckpt from which to load weights</p></li>
<li><p><strong>pretrain</strong> – Pretrained weights to load. Default is imagenet. May supply a compatible Tensorflow model from which to load weights.</p></li>
<li><p><strong>pretrain_model_format</strong> – Optional. May supply format of pretrained Slideflow Keras model if the model was made with a legacy version.
Default value will be slideflow.model.MODEL_FORMAT_CURRENT,
but slideflow.model.MODEL_FORMAT_LEGACY may be supplied.</p></li>
<li><p><strong>batch_file</strong> – Manually specify batch file to use for a hyperparameter sweep. If not specified, will use project default.</p></li>
<li><p><strong>hyperparameters</strong> – Manually specify hyperparameter combination to use for training. If specified, will ignore batch training file.</p></li>
<li><p><strong>validation_settings</strong> – Namespace of validation settings, as provided by sf.project.get_validation_settings()</p></li>
<li><p><strong>max_tiles_per_slide</strong> – Will only use up to this many tiles from each slide for training. If zero, will include all tiles.</p></li>
<li><p><strong>min_tiles_per_slide</strong> – Minimum number of tiles a slide must have to be included in training.</p></li>
<li><p><strong>starting_epoch</strong> – Starts training at the specified epoch</p></li>
<li><p><strong>steps_per_epoch_override</strong> – If provided, will manually set the number of steps in an epoch (default epoch length is the number of total tiles)</p></li>
<li><p><strong>auto_extract</strong> – Bool. If True, will automatically extract tiles as needed for training, without needing to explicitly call extract_tiles()</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
<li><p><strong>normalizer_strategy</strong> – Either ‘tfrecord’ or ‘realtime’. If TFrecord and auto_extract is True, then tiles will be extracted to TFRecords and stored normalized.
If realtime, then normalization is performed during training.</p></li>
<li><p><strong>use_tensorboard</strong> – Bool. If True, will add tensorboard callback during training for realtime monitoring.</p></li>
<li><p><strong>multi_gpu</strong> – Bool. If True, will attempt to train using multiple GPUs using Keras MirroredStrategy.</p></li>
<li><p><strong>save_predicitons</strong> – Bool. If True, will save predictions with each validation. May increase validation time for large projects.</p></li>
<li><p><strong>skip_metrics</strong> – Bool. If True, will skip metrics (ROC, AP, F1) during validation, which may improve training time for large projects.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary containing model names mapped to train_acc, val_loss, and val_acc</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.train_clam">
<span class="sig-name descname"><span class="pre">train_clam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exp_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pt_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_label_headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_slides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_slides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clam_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attention_heatmaps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.train_clam" title="Permalink to this definition">¶</a></dt>
<dd><p>Using a trained model, generate feature activations and train a CLAM model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exp_name</strong> – Name of experiment. Will make clam/{exp_name} subfolder.</p></li>
<li><p><strong>pt_files</strong> – Path to pt_files containing tile-level features.</p></li>
<li><p><strong>outcome_label_headers</strong> – Name in annotation column which specifies the outcome label.</p></li>
<li><p><strong>tile_px</strong> – Tile width in pixels.</p></li>
<li><p><strong>tile_um</strong> – Tile width in microns.</p></li>
<li><p><strong>train_slides</strong> – List of slide names for training. If ‘auto’ (default), will auto-generate training/validation split.</p></li>
<li><p><strong>validation_slides</strong> – List of slide names for training. If ‘auto’ (default), will auto-generate training/validation split.</p></li>
<li><p><strong>filters</strong> – Dictionary of column names mapping to column values by which to filter slides using the annotation file.
Used if train_slides and validation_slides are ‘auto’.</p></li>
<li><p><strong>filter_blank</strong> – List of annotations headers; slides blank in this column will be excluded.
Used if train_slides and validation_slides are ‘auto’.</p></li>
<li><p><strong>clam_args</strong> – Dictionary with clam arguments, as provided by sf.clam.get_args()</p></li>
<li><p><strong>attention_heatmaps</strong> – Bool. If true, will save attention heatmaps of validation dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.project.SlideflowProject.visualize_tiles">
<span class="sig-name descname"><span class="pre">visualize_tiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfrecord_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.project.SlideflowProject.visualize_tiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualizes node activations across a set of image tiles through progressive convolutional masking.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Path to Tensorflow model</p></li>
<li><p><strong>node</strong> – Int, node to analyze</p></li>
<li><p><strong>tfrecord_dict</strong> – Dictionary mapping tfrecord paths to tile indices. Visualization will be performed on these tiles.</p></li>
<li><p><strong>directory</strong> – Directory in which to save images.</p></li>
<li><p><strong>mask_width</strong> – Width of mask to convolutionally apply. Defaults to 1/6 of tile_px</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles.</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image.</p></li>
<li><p><strong>model_format</strong> – Optional. May supply format of saved Slideflow Keras model if the model was made with a legacy version.
Default value will be slideflow.model.MODEL_FORMAT_CURRENT,
but slideflow.model.MODEL_FORMAT_LEGACY may be supplied.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-slideflow.activations">
<span id="activations"></span><h2>activations<a class="headerlink" href="#module-slideflow.activations" title="Permalink to this headline">¶</a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.activations.</span></span><span class="sig-name descname"><span class="pre">ActivationsError</span></span><a class="headerlink" href="#slideflow.activations.ActivationsError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.activations.</span></span><span class="sig-name descname"><span class="pre">ActivationsVisualizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfrecords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_label_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activations_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activations_export</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['postconv']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_logits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads annotations, saved layer activations, and prepares output saving directories.
Will also read/write processed activations to a PKL cache file to save time in future iterations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfrecords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_label_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activations_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activations_export</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['postconv']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_logits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Object initializer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Path to model from which to calculate activations</p></li>
<li><p><strong>tfrecords</strong> – List of tfrecords paths</p></li>
<li><p><strong>root_dir</strong> – Root directory in which to save cache files and output files</p></li>
<li><p><strong>image_size</strong> – Int, width/height of input images in pixels</p></li>
<li><p><strong>annotations</strong> – Path to CSV file containing slide annotations</p></li>
<li><p><strong>outcome_label_headers</strong> – String, name of outcome header in annotations file, used to compare activations between categories</p></li>
<li><p><strong>focus_nodes</strong> – List of int, nodes on which to focus when generating cross-category statistics</p></li>
<li><p><strong>normalizer</strong> – String, which real-time normalization to use on images taken from TFRecords</p></li>
<li><p><strong>noramlizer_source</strong> – String, path to image to use as source for real-time normalization</p></li>
<li><p><strong>activations_cache</strong> – File in which to store activations PKL cache</p></li>
<li><p><strong>batch_size</strong> – Batch size to use during activations calculations</p></li>
<li><p><strong>activations_export</strong> – Filename for CSV export of activations</p></li>
<li><p><strong>max_tiles_per_slide</strong> – Maximum number of tiles from which to generate activations for each slide</p></li>
<li><p><strong>min_tiles_per_slide</strong> – If provided, will only evaluate slides with a given minimum number of tiles.</p></li>
<li><p><strong>manifest</strong> – Optional, dict mapping tfrecords to number of tiles contained. Used for progress bars and min_tiles_per_slide.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.calculate_activation_averages_and_stats">
<span class="sig-name descname"><span class="pre">calculate_activation_averages_and_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'avg'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.calculate_activation_averages_and_stats" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Calculates activation averages across categories,</dt><dd><p>as well as tile-level and patient-level statistics using ANOVA,
exporting to CSV if desired.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – Path to CSV file for export.</p></li>
<li><p><strong>node_method</strong> – Either ‘avg’ (default) or ‘threshold’. If avg, slide-level node data is calculated by averaging
node activations across all tiles. If threshold, slide-level node data is calculated by counting
the number of tiles with node activations &gt; threshold and dividing by the total number of tiles.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dict mapping slides to dict of nodes mapping to slide-level node values;
Dict mapping nodes to tile-level dict of statistics (‘p’, ‘f’);
Dict mapping nodes to slide-level dict of statistics (‘p’, ‘f’);</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.export_to_csv">
<span class="sig-name descname"><span class="pre">export_to_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.export_to_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Exports calculated activations to csv.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – Path to CSV file for export.</p></li>
<li><p><strong>nodes</strong> – (optional) List of int. Activations of these nodes will be exported.
If None, activations for all nodes will be exported.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.find_neighbors">
<span class="sig-name descname"><span class="pre">find_neighbors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">neighbor_AV</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neighbor_slides</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_neighbors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ball_tree'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.find_neighbors" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds neighboring tiles for a given ActivationsVisualizer and list of slides.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>neighbor_AV</strong> – ActivationsVisualizer, will be used to look for neighbors</p></li>
<li><p><strong>neighbor_slides</strong> – Either a single slide name or a list of slide names.
Corresponds to slides in the provided neighboring AV.
Will look for neighbors to all tiles in these slides.</p></li>
<li><p><strong>n_neighbors</strong> – Number of neighbors to find for each tile</p></li>
<li><p><strong>algorithm</strong> – NearestNeighbors algorithm, either ‘kd_tree’, ‘ball_tree’, or ‘brute’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Dict mapping slide names (from self.slides) to tile indices for tiles</dt><dd><p>that were found to be neighbors to the provided neighbor_AV and neighbor_slides.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.generate_activations_from_model">
<span class="sig-name descname"><span class="pre">generate_activations_from_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['postconv']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_logits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.generate_activations_from_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates activations from a given model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Path to Tensorflow model from which to calculate final layer activations.</p></li>
<li><p><strong>batch_size</strong> – Batch size for model predictions.</p></li>
<li><p><strong>export</strong> – String (default: None). If provided, will export CSV of activations with this filename.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.generate_box_plots">
<span class="sig-name descname"><span class="pre">generate_box_plots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">export_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.generate_box_plots" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates box plots comparing nodal activations at the slide-level and tile-level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>export_folder</strong> – (optional) Path to directory in which to save box plots.
If None, will save boxplots to STATS_ROOT directory.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.get_activations">
<span class="sig-name descname"><span class="pre">get_activations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.get_activations" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns dictionary mapping slides to tile-level node activations.</p>
<dl>
<dt>Example (3 nodes):</dt><dd><dl class="simple">
<dt>{ ‘Slide1’: [[0.1, 0.5, 0.6], # Slide1, node1 activations for all tiles</dt><dd><p>[0.2, 0.1, 0.7], # Slide1, node2 activations for all tiles
[0.4, 0.7, 0.1]] # Slide1, node3 activations for all tiles</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.get_predictions">
<span class="sig-name descname"><span class="pre">get_predictions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.get_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns dictionary mapping slides to tile-level logit predictions.</p>
<dl>
<dt>Example (2 outcome categories):</dt><dd><dl class="simple">
<dt>{ ‘Slide1’: [[0.1, 0.9, 0.6], # Slide1, logit predictions for category 1 for all tiles</dt><dd><p>[0.9, 0.1, 0.4], # Slide1, logit predictions for category 2 for all tiles</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.get_slide_level_categorical_predictions">
<span class="sig-name descname"><span class="pre">get_slide_level_categorical_predictions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.get_slide_level_categorical_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns slide-level predictions assuming the model is predicting a categorical outcome.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prediction_filter</strong> – (optional) List of int. If provided, will restrict predictions to only these
categories, with final prediction being based based on highest logit
among these categories.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Dictionary mapping slide names to final slide-level predictions.
slide_percentages:      This is a dictionary mapping slide names to a dictionary for each category,</p>
<blockquote>
<div><blockquote>
<div><p>which maps the category id to the percent of tiles in the slide
predicted to be this category.
Example:</p>
<blockquote>
<div><dl class="simple">
<dt>{ ‘slide1’: {</dt><dd><p>0: 0.24,
1: 0.15,
2: 0.61 }}</p>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
<p>If linear model, this is the same as slide_predictions.</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>slide_predictions</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.get_slide_level_linear_predictions">
<span class="sig-name descname"><span class="pre">get_slide_level_linear_predictions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.get_slide_level_linear_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns slide-level predictions assuming the model is predicting a linear outcome.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl>
<dt>Dictionary mapping slide names to final slide-level predictions</dt><dd><p>for each outcome cateogry, calculated as the average predicted value
in the outcome category for all tiles in the slide.
Example:</p>
<blockquote>
<div><dl class="simple">
<dt>{ ‘slide1’: {</dt><dd><p>0: 0.24,        # Outcome category 0
1: 0.15,        # Outcome category 1
2: 0.61 }}      # Outcome category 2</p>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.get_tile_node_activations_by_category">
<span class="sig-name descname"><span class="pre">get_tile_node_activations_by_category</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.get_tile_node_activations_by_category" title="Permalink to this definition">¶</a></dt>
<dd><p>For each outcome category, calculates activations of a given node across all tiles in the category.
Requires annotations to have been loaded with load_annotations()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> – Int, id of node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl>
<dt>List of node activations separated by category.</dt><dd><p>Example:
[[0.1, 0.2, 0.7, 0.1, 0.0], # Activations for node “N” across all tiles from slides in category 1</p>
<blockquote>
<div><p>[0.8, 0.2, 0.1]]                       # Activations for node “N” across all tiles from slides in category 2</p>
</div></blockquote>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.get_top_nodes_by_slide">
<span class="sig-name descname"><span class="pre">get_top_nodes_by_slide</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.get_top_nodes_by_slide" title="Permalink to this definition">¶</a></dt>
<dd><p>First, slide-level average node activations are calculated for all slides.
Then, the significance of the difference in average node activations between for slides
belonging to the different outcome categories is calculated using ANOVA.
This function then returns a list of all nodes, sorted by ANOVA p-value (most significant first).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.get_top_nodes_by_tile">
<span class="sig-name descname"><span class="pre">get_top_nodes_by_tile</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.get_top_nodes_by_tile" title="Permalink to this definition">¶</a></dt>
<dd><p>First, tile-level average node activations are calculated for all tiles.
Then, the significance of the difference in node activations for tiles
belonging to the different outcome categories is calculated using ANOVA.
This function then returns a list of all nodes, sorted by ANOVA p-value (most significant first).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.load_annotations">
<span class="sig-name descname"><span class="pre">load_annotations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">annotations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_label_headers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.load_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads annotations from a given file with the specified outcome header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>annotations</strong> – Path to CSV annotations file.</p></li>
<li><p><strong>outcome_label_headers</strong> – String, name of column header from which to read outcome variables.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.logistic_regression">
<span class="sig-name descname"><span class="pre">logistic_regression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slide_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'avg'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.logistic_regression" title="Permalink to this definition">¶</a></dt>
<dd><p>Experimental function, creates a logistic regression model
to generate slide-level predictions from slide-level statistics.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.map_to_predictions">
<span class="sig-name descname"><span class="pre">map_to_predictions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.map_to_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns coordinates and metadata for tile-level predictions for all tiles,
which can be used to create a TFRecordMap.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – Int, identifies the outcome category id for which predictions will be mapped to the X-axis</p></li>
<li><p><strong>y</strong> – Int, identifies the outcome category id for which predictions will be mapped to the Y-axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of x-axis coordinates (predictions for the category ‘x’)
mapped_y:       List of y-axis coordinates (predictions for the category ‘y’)
umap_meta:      List of dictionaries containing tile-level metadata (used for TFRecordMap)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>mapped_x</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.save_example_tiles_gradient">
<span class="sig-name descname"><span class="pre">save_example_tiles_gradient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.save_example_tiles_gradient" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>For a given set of activation nodes, saves image tiles named according</dt><dd><p>to their corresponding node activations, for easy sorting and visualization.
Duplicate image tiles will be saved for each node, organized into subfolders named according to node id.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> – List of int, nodes to evaluate</p></li>
<li><p><strong>export_folder</strong> – Path to folder in which to save examples tiles</p></li>
<li><p><strong>tile_filter</strong> – (optional) Dict mapping slide names to tile indices.
If provided, will only save image tiles from this list.
Example:
{‘slide1’: [0, 16, 200]}</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.save_example_tiles_high_low">
<span class="sig-name descname"><span class="pre">save_example_tiles_high_low</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slides</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.save_example_tiles_high_low" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given set of activation nodes, saves images of tiles with the highest and lowest
activations in these nodes, restricted to the set of slides designated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> – List of int. Nodes with which to perform this function.</p></li>
<li><p><strong>slides</strong> – List of slide names. Will load tile images from these slides.</p></li>
<li><p><strong>export_folder</strong> – Path to directory in which to save image tiles.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.ActivationsVisualizer.slide_tile_dict">
<span class="sig-name descname"><span class="pre">slide_tile_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.ActivationsVisualizer.slide_tile_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates dictionary mapping slides to list of node activations for each tile.</p>
<dl>
<dt>Example (3 nodes):</dt><dd><dl class="simple">
<dt>{ ‘Slide1’: [[0.1, 0.2, 0.4], # Slide1, node activations for tile1</dt><dd><p>[0.5, 0.1, 0.7], # Slide1, node activations for tile2
[0.6, 0.9, 0.1]] # Slide1, node activations for tile3</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.activations.Heatmap">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.activations.</span></span><span class="sig-name descname"><span class="pre">Heatmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slide_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inside'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.Heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates heatmap by calculating predictions from a sliding scale window across a slide.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.Heatmap.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slide_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inside'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.Heatmap.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Convolutes across a whole slide, calculating logits and saving predictions internally for later use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>slide_path</strong> – Path to slide</p></li>
<li><p><strong>model_path</strong> – Path to Tensorflow model</p></li>
<li><p><strong>size_px</strong> – Size of image tiles, in pixels</p></li>
<li><p><strong>size_um</strong> – Size of image tiles, in microns</p></li>
<li><p><strong>stride_div</strong> – Divisor for stride when convoluting across slide</p></li>
<li><p><strong>roi_dir</strong> – Directory in which slide ROI is contained</p></li>
<li><p><strong>roi_list</strong> – If a roi_dir is not supplied, a list of paths to ROI CSVs can be provided</p></li>
<li><p><strong>roi_method</strong> – Either ‘inside’, ‘outside’, or ‘ignore’. If inside, tiles will be extracted inside ROI region
If outside, tiles will be extracted outside ROI region</p></li>
<li><p><strong>buffer</strong> – Either ‘vmtouch’ or path to directory to use for buffering slides
Significantly improves performance for slides on HDDs</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
<li><p><strong>batch_size</strong> – Batch size when calculating predictions</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.Heatmap.display">
<span class="sig-name descname"><span class="pre">display</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logit_cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.Heatmap.display" title="Permalink to this definition">¶</a></dt>
<dd><p>Interactively displays calculated logits as a heatmap.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_roi</strong> – Bool, whether to overlay ROIs onto heatmap image</p></li>
<li><p><strong>interpolation</strong> – Interpolation strategy to use for smoothing heatmap</p></li>
<li><p><strong>logit_cmap</strong> – <p>Either function or a dictionary use to create heatmap colormap.
Each image tile will generate a list of predictions of length O,
where O is the number of outcome categories.
If logit_cmap is a function, then this logit prediction list will be passed to the function,</p>
<blockquote>
<div><p>and the function is expected to return [R, G, B] values which will be displayed.</p>
</div></blockquote>
<dl>
<dt>If the logit_cmap is a dictionary, it should map ‘r’, ‘g’, and ‘b’ to outcome indices;</dt><dd><p>The prediction for these outcome categories will be mapped to the corresponding colors.
Thus, the corresponding color will only reflect predictions of up to three outcome categories.
Example (this would map prediction for outcome 0 to the red colorspace, outcome 3 to green colorspace, and so on):
{</p>
<blockquote>
<div><p>’r’: 0,
‘g’: 3,
‘b’: 1</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.Heatmap.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logit_cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.Heatmap.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves calculated logits as heatmap overlays.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_roi</strong> – Bool, whether to overlay ROIs onto heatmap image</p></li>
<li><p><strong>interpolation</strong> – Interpolation strategy to use for smoothing heatmap</p></li>
<li><p><strong>logit_cmap</strong> – <p>Either function or a dictionary use to create heatmap colormap.
Each image tile will generate a list of predictions of length O,
where O is the number of outcome categories.
If logit_cmap is a function, then this logit prediction list will be passed to the function,</p>
<blockquote>
<div><p>and the function is expected to return [R, G, B] values which will be displayed.</p>
</div></blockquote>
<dl>
<dt>If the logit_cmap is a dictionary, it should map ‘r’, ‘g’, and ‘b’ to outcome indices;</dt><dd><p>The prediction for these outcome categories will be mapped to the corresponding colors.
Thus, the corresponding color will only reflect predictions of up to three outcome categories.
Example (this would map prediction for outcome 0 to the red colorspace, outcome 3 to green colorspace, and so on):
{</p>
<blockquote>
<div><p>’r’: 0,
‘g’: 3,
‘b’: 1</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.activations.TileVisualizer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.activations.</span></span><span class="sig-name descname"><span class="pre">TileVisualizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.TileVisualizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to supervize visualization of node activations across an image tile.
Visualization is accomplished by performing sequential convolutional masking</p>
<blockquote>
<div><p>and determining impact of masking on node activation. In this way,
the masking reveals spatial importance with respect to activation of the given node.</p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.TileVisualizer.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.TileVisualizer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Object initializer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Path to Tensorflow model</p></li>
<li><p><strong>node</strong> – Int, activation node to analyze</p></li>
<li><p><strong>tile_px</strong> – Int, width/height of image tiles</p></li>
<li><p><strong>mask_width</strong> – Width of mask to convolutionally apply. Defaults to 1/6 of tile_px</p></li>
<li><p><strong>normalizer</strong> – String, normalizer to apply to tiles in real-time.</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.activations.TileVisualizer.visualize_tile">
<span class="sig-name descname"><span class="pre">visualize_tile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tfrecord</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_jpg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoomed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interactive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.activations.TileVisualizer.visualize_tile" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualizes tiles, either interactively or saving to directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tfrecord</strong> – If provided, will visualize tile from the designated tfrecord.
Must supply either a tfrecord and index or image_jpg</p></li>
<li><p><strong>index</strong> – Index of tile to visualize within tfrecord, if provided</p></li>
<li><p><strong>image_jpeg</strong> – JPG image to perform analysis on</p></li>
<li><p><strong>export_folder</strong> – Folder in which to save heatmap visualization</p></li>
<li><p><strong>zoomed</strong> – Bool. If true, will crop image to space containing heatmap (otherwise a small border will be seen)</p></li>
<li><p><strong>interactive</strong> – If true, will display as interactive map using matplotlib</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-slideflow.io">
<span id="io"></span><h2>io<a class="headerlink" href="#module-slideflow.io" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="slideflow.io.Dataset">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.io.</span></span><span class="sig-name descname"><span class="pre">Dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sources</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Object to supervise organization of slides, tfrecords, and tiles across a one or more datasets in a stored configuration file.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sources</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.get_labels_from_annotations">
<span class="sig-name descname"><span class="pre">get_labels_from_annotations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_float</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assigned_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'label'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.get_labels_from_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of slide names mapping to patient id and [an] label(s).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>header</strong> (<em>headers                 annotation</em>) – </p></li>
<li><p><strong>bool</strong> (<em>use_float               Either</em>) – <p>If true, will try to convert all data into float. If unable, will raise TypeError.
If false, will interpret all data as categorical.
If a dict is provided, will look up each header to determine whether float should be used.
If ‘auto’, will try to convert all data into float. For each header in which this fails,</p>
<blockquote>
<div><p>will interpret as categorical instead.</p>
</div></blockquote>
</p></li>
<li><p><strong>dict</strong> – <p>If true, will try to convert all data into float. If unable, will raise TypeError.
If false, will interpret all data as categorical.
If a dict is provided, will look up each header to determine whether float should be used.
If ‘auto’, will try to convert all data into float. For each header in which this fails,</p>
<blockquote>
<div><p>will interpret as categorical instead.</p>
</div></blockquote>
</p></li>
<li><p><strong>'auto'.</strong> (<em>or</em>) – <p>If true, will try to convert all data into float. If unable, will raise TypeError.
If false, will interpret all data as categorical.
If a dict is provided, will look up each header to determine whether float should be used.
If ‘auto’, will try to convert all data into float. For each header in which this fails,</p>
<blockquote>
<div><p>will interpret as categorical instead.</p>
</div></blockquote>
</p></li>
<li><p><strong>provided</strong> (<em>assigned_labels Dictionary mapping label ids to label names. If not</em>) – ids to names by sorting alphabetically.</p></li>
<li><p><strong>map</strong> (<em>will</em>) – ids to names by sorting alphabetically.</p></li>
<li><p><strong>'label'</strong> (<em>key                             Key name to use for the returned dictionary. Defaults to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ol class="arabic simple">
<li><p>Dictionary with slides as keys and dictionaries as values. The value dictionaries contain both “TCGA.patient” and “label” (or manually specified) keys.</p></li>
<li><p>list of unique labels</p></li>
</ol>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.get_manifest">
<span class="sig-name descname"><span class="pre">get_manifest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'path'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.get_manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a manifest of all tfrecords.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> – Either ‘path’ (default) or ‘name’. Determines key format in the manifest dictionary.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary mapping key (path or slide name) to number of total tiles.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.get_rois">
<span class="sig-name descname"><span class="pre">get_rois</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.get_rois" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all ROIs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.get_slide_paths">
<span class="sig-name descname"><span class="pre">get_slide_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.get_slide_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of paths to all slides.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.get_slides">
<span class="sig-name descname"><span class="pre">get_slides</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.get_slides" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of slide names from the annotations file using a given set of filters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.get_tfrecords">
<span class="sig-name descname"><span class="pre">get_tfrecords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_subdirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ask_to_merge_subdirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.get_tfrecords" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all tfrecords.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.get_tfrecords_by_subfolder">
<span class="sig-name descname"><span class="pre">get_tfrecords_by_subfolder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subfolder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.get_tfrecords_by_subfolder" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of tfrecords in a specific subfolder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.get_tfrecords_folders">
<span class="sig-name descname"><span class="pre">get_tfrecords_folders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.get_tfrecords_folders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns folders containing tfrecords.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.load_annotations">
<span class="sig-name descname"><span class="pre">load_annotations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">annotations_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.load_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Load annotations from a given CSV file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.update_annotations_with_slidenames">
<span class="sig-name descname"><span class="pre">update_annotations_with_slidenames</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">annotations_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.update_annotations_with_slidenames" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to automatically associate slide names from a directory with patients in a given annotations file,
skipping any slide names that are already present in the annotations file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.update_manifest_at_dir">
<span class="sig-name descname"><span class="pre">update_manifest_at_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.update_manifest_at_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Log number of tiles in each TFRecord file present in the given directory and all subdirectories,
saving manifest to file within the parent directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.io.Dataset.verify_annotations_slides">
<span class="sig-name descname"><span class="pre">verify_annotations_slides</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.Dataset.verify_annotations_slides" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that annotations are correctly loaded.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="slideflow.io.DatasetError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.io.</span></span><span class="sig-name descname"><span class="pre">DatasetError</span></span><a class="headerlink" href="#slideflow.io.DatasetError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.split_tiles">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.</span></span><span class="sig-name descname"><span class="pre">split_tiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fraction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.split_tiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Split a directory of .jpg files into subdirectories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tiles</strong> (<em>folder          folder to search for</em>) – </p></li>
<li><p><strong>subdirectory;</strong> (<em>fraction        array containing fraction of tiles to include in each</em>) – remaining tiles will be split among subdirectories with fraction of -1</p></li>
<li><p><strong>fraction</strong> (<em>names           names of subfolder to split tiles. Must be same length as</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-slideflow.io.tfrecords">
<span id="io-tfrecords"></span><h2>io.tfrecords<a class="headerlink" href="#module-slideflow.io.tfrecords" title="Permalink to this headline">¶</a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.TFRecordsError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">TFRecordsError</span></span><a class="headerlink" href="#slideflow.io.tfrecords.TFRecordsError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.extract_tiles">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">extract_tiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tfrecord</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'image_raw':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.string,</span> <span class="pre">default_value=None),</span> <span class="pre">'loc_x':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.int64,</span> <span class="pre">default_value=None),</span> <span class="pre">'loc_y':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.int64,</span> <span class="pre">default_value=None),</span> <span class="pre">'slide':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.string,</span> <span class="pre">default_value=None)}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'image_raw'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.extract_tiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads and saves images from a TFRecord to a destination folder.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.get_tfrecord_by_index">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">get_tfrecord_by_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tfrecord</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.get_tfrecord_by_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads and returns an individual record from a tfrecord by index, including slide name and JPEG-processed image data.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.get_training_and_validation_tfrecords">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">get_training_and_validation_tfrecords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_log</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slide_labels_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_strategy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_k_fold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k_fold_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.get_training_and_validation_tfrecords" title="Permalink to this definition">¶</a></dt>
<dd><p>From a specified subfolder within the project’s main TFRecord folder, prepare a training set and validation set.
If a validation plan has already been prepared (e.g. K-fold iterations were already determined), the previously generated plan will be used.
Otherwise, create a new plan and log the result in the TFRecord directory so future models may use the same plan for consistency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – A slideflow.datasets.Dataset object</p></li>
<li><p><strong>validation_log</strong> – Path to .log file containing validation plans</p></li>
<li><p><strong>slide_labels_dict</strong> – <p>Dictionary mapping slides to labels (used for balancing outcome labels in training and validation cohorts).
Example dictionary:</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><dl class="simple">
<dt>‘slide1’: {</dt><dd><p>outcome_key: ‘Outcome1’,
sfutil.TCGA.patient: ‘patient_id’</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</p></li>
<li><p><strong>outcome_key</strong> – Key indicating outcome variable in slide_labels_dict</p></li>
<li><p><strong>model_type</strong> – Either ‘categorical’ or ‘linear’</p></li>
<li><p><strong>validation_target</strong> – Either ‘per-patient’ or ‘per-tile’</p></li>
<li><p><strong>validation_strategy</strong> – Either ‘k-fold’, ‘k-fold-preserved-site’, ‘bootstrap’, or ‘fixed’.</p></li>
<li><p><strong>validation_fraction</strong> – Float, proportion of data for validation. Not used if strategy is k-fold.</p></li>
<li><p><strong>validation_k_fold</strong> – K, if using K-fold validation.</p></li>
<li><p><strong>k_fold_iter</strong> – Which K-fold iteration, if using K-fold validation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an array of full paths to training tfrecords, and an array of paths to validation tfrecords.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Two arrays</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.join_tfrecord">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">join_tfrecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assign_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.join_tfrecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly samples from tfrecords in the input folder with shuffling,
and combines into a single tfrecord file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.merge_split_tfrecords">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">merge_split_tfrecords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.merge_split_tfrecords" title="Permalink to this definition">¶</a></dt>
<dd><p>Merges TFRecords with the same name in subfolders within the given source folder,
as may be the case when using split TFRecords for tile-level validation.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.multi_image_example">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">multi_image_example</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slide</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.multi_image_example" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Tensorflow Data example for TFRecord storage with multiple images.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.print_tfrecord">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">print_tfrecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.print_tfrecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the slide names (and locations, if present) for records in the given tfrecord file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.shuffle_tfrecord">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">shuffle_tfrecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.shuffle_tfrecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Shuffles records in a TFRecord, saving the original to a .old file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.shuffle_tfrecords_by_dir">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">shuffle_tfrecords_by_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.shuffle_tfrecords_by_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>For each TFRecord in a directory, shuffles records in the TFRecord, saving the original to a .old file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.split_patients_list">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">split_patients_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patients_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">balance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preserved_site</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.split_patients_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a dictionary of patients into n groups, balancing according to key “balance” if provided.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.split_tfrecord">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">split_tfrecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tfrecord_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.split_tfrecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits records from a single tfrecord file into individual tfrecord files by slide.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.tfrecord_example">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">tfrecord_example</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slide</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.tfrecord_example" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Tensorflow Data example for TFRecord storage.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.transform_tfrecord">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">transform_tfrecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assign_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hue_shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.transform_tfrecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms images in a single tfrecord. Can perform hue shifting, resizing, or re-assigning slide label.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.update_tfrecord">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">update_tfrecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tfrecord_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_feature_description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'image_raw':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.string,</span> <span class="pre">default_value=None),</span> <span class="pre">'loc_x':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.int64,</span> <span class="pre">default_value=None),</span> <span class="pre">'loc_y':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.int64,</span> <span class="pre">default_value=None),</span> <span class="pre">'slide':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.string,</span> <span class="pre">default_value=None)}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'slide'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assign_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'image_raw'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.update_tfrecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates a single tfrecord from an old format to a new format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.update_tfrecord_dir">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">update_tfrecord_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_feature_description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'image_raw':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.string,</span> <span class="pre">default_value=None),</span> <span class="pre">'loc_x':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.int64,</span> <span class="pre">default_value=None),</span> <span class="pre">'loc_y':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.int64,</span> <span class="pre">default_value=None),</span> <span class="pre">'slide':</span> <span class="pre">FixedLenFeature(shape=[],</span> <span class="pre">dtype=tf.string,</span> <span class="pre">default_value=None)}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'slide'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assign_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'image_raw'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.update_tfrecord_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates tfrecords in a directory from an old format to a new format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.write_tfrecords_merge">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">write_tfrecords_merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.write_tfrecords_merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Scans a folder for subfolders, assumes subfolders are slide names. Assembles all image tiles within
subfolders and labels using the provided annotation_dict, assuming the subfolder is the slide name.
Collects all image tiles and exports into a single tfrecord file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.write_tfrecords_multi">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">write_tfrecords_multi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.write_tfrecords_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Scans a folder for subfolders, assumes subfolders are slide names. Assembles all image tiles within
subfolders and labels using the provided annotation_dict, assuming the subfolder is the slide name.
Collects all image tiles and exports into multiple tfrecord files, one for each slide.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.io.tfrecords.write_tfrecords_single">
<span class="sig-prename descclassname"><span class="pre">slideflow.io.tfrecords.</span></span><span class="sig-name descname"><span class="pre">write_tfrecords_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slide</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.io.tfrecords.write_tfrecords_single" title="Permalink to this definition">¶</a></dt>
<dd><p>Scans a folder for image tiles, annotates using the provided slide, exports
into a single tfrecord file.</p>
</dd></dl>

</div>
<div class="section" id="module-slideflow.model">
<span id="model"></span><h2>model<a class="headerlink" href="#module-slideflow.model" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="slideflow.model.HyperParameters">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.model.</span></span><span class="sig-name descname"><span class="pre">HyperParameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_px</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">299</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">302</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finetune_epochs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">toplayer_epochs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Xception'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pooling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'max'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sparse_categorical_crossentropy'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_rate_decay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_rate_decay_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hidden_layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hidden_layer_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Adam'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">early_stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">early_stop_patience</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">early_stop_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'loss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">balanced_training</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'BALANCE_BY_CATEGORY'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">balanced_validation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'NO_BALANCE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainable_layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">L2_weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">augment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_images</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.HyperParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Object to supervise construction of a set of hyperparameters for Slideflow models.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.model.HyperParameters.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_px</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">299</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">302</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finetune_epochs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">toplayer_epochs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Xception'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pooling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'max'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sparse_categorical_crossentropy'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_rate_decay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_rate_decay_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hidden_layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hidden_layer_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Adam'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">early_stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">early_stop_patience</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">early_stop_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'loss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">balanced_training</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'BALANCE_BY_CATEGORY'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">balanced_validation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'NO_BALANCE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainable_layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">L2_weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">augment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_images</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.HyperParameters.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.model.HyperParameters.get_model">
<span class="sig-name descname"><span class="pre">get_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_tensor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.HyperParameters.get_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Keras model of the appropriate architecture, input shape, pooling, and initial weights.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.model.HyperParameters.get_opt">
<span class="sig-name descname"><span class="pre">get_opt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.HyperParameters.get_opt" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns optimizer with appropriate learning rate.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.model.HyperParameters.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.HyperParameters.model_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns either ‘linear’ or ‘categorical’ depending on the loss type.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.model.HyperParameters.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.HyperParameters.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensures that hyperparameter combinations are valid.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.model.ModelActivationsInterface">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.model.</span></span><span class="sig-name descname"><span class="pre">ModelActivationsInterface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['postconv']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_logits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.ModelActivationsInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides an interface to obtain logits and post-convolutional activations
from saved Slideflow Keras models. Provides support for newer models (v1.9.1+)
and legacy slideflow models (1.9.0b and earlier)</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.model.ModelActivationsInterface.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['postconv']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_logits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.ModelActivationsInterface.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Path to saved Slideflow Keras model</p></li>
<li><p><strong>model_format</strong> – Either slideflow.model.MODEL_FORMAT_CURRENT or _LEGACY.
Indicates how the saved model should be processed,
as older versions of Slideflow had models constructed differently,
with differing naming of Keras layers.</p></li>
<li><p><strong>layers</strong> – Layers from which to generate activations. The post-convolution activation layer is accessed via ‘postconv’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.model.ModelActivationsInterface.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_batch</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.ModelActivationsInterface.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a batch of images, will return a batch of post-convolutional activations and a batch of logits.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.model.SlideflowModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.model.</span></span><span class="sig-name descname"><span class="pre">SlideflowModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slide_annotations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_tfrecords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_tfrecords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mixed_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'categorical'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_sizes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.SlideflowModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model containing all functions necessary to build input dataset pipelines,
build a training and validation set model, and monitor and execute training.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.model.SlideflowModel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slide_annotations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_tfrecords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_tfrecords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mixed_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'categorical'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_sizes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.SlideflowModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Model initializer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_directory</strong> – Location where event logs and checkpoints will be written</p></li>
<li><p><strong>image_size</strong> – Int, width/height of input image in pixels.</p></li>
<li><p><strong>slide_annotations</strong> – Dictionary mapping slide names to both patient names and outcome labels</p></li>
<li><p><strong>train_tfrecords</strong> – List of tfrecord paths for training</p></li>
<li><p><strong>validation_tfrecords</strong> – List of tfrecord paths for validation</p></li>
<li><p><strong>manifest</strong> – Manifest dictionary mapping TFRecords to number of tiles</p></li>
<li><p><strong>mixed_precision</strong> – Bool, if True, will use FP16 mixed precision (rather than FP32)</p></li>
<li><p><strong>model_type</strong> – Type of model outcome label, either ‘categorical’ or ‘linear’</p></li>
<li><p><strong>normalizer</strong> – Tile image normalization to perform in real-time during training</p></li>
<li><p><strong>normalizer_source</strong> – Source image for normalization if being performed in real-time</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.model.SlideflowModel.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tfrecords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'categorical'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permutation_importance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">histogram</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_predictions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.SlideflowModel.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tfrecords</strong> – List of TFrecords paths to load for evaluation.</p></li>
<li><p><strong>hp</strong> – HyperParameters object</p></li>
<li><p><strong>model</strong> – Optional; Tensorflow model to load for evaluation. If None, will build model using hyperparameters.</p></li>
<li><p><strong>model_type</strong> – Either linear or categorical.</p></li>
<li><p><strong>checkpoint</strong> – Path to cp.cpkt checkpoint. If provided, will update model with given checkpoint weights.</p></li>
<li><p><strong>batch_size</strong> – Evaluation batch size.</p></li>
<li><p><strong>max_tiles_per_slide</strong> – If provided, will select only up to this maximum number of tiles from each slide.</p></li>
<li><p><strong>min_tiles_per_slide</strong> – If provided, will only evaluate slides with a given minimum number of tiles.</p></li>
<li><p><strong>multi_image</strong> – If true, will evaluate model with multi-image inputs.</p></li>
<li><p><strong>permutation_importance</strong> – If true, will run permutation feature importance to define relative benefit of histology
and each clinical slide-level feature input, if provided.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Keras history object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.model.SlideflowModel.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pretrain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'imagenet'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pretrain_model_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resume_training</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate_on_batch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">512</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_epoch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ema_observations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ema_smoothing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">steps_per_epoch_override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_tensorboard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_gpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_predictions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.model.SlideflowModel.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Train the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hp</strong> – HyperParameters object</p></li>
<li><p><strong>pretrain</strong> – Either None, ‘imagenet’ or path to Tensorflow model for pretrained weights</p></li>
<li><p><strong>resume_training</strong> – If True, will attempt to resume previously aborted training</p></li>
<li><p><strong>checkpoint</strong> – Path to cp.cpkt checkpoint file. If provided, will load checkpoint weights</p></li>
<li><p><strong>log_frequency</strong> – How frequent to update Tensorboard logs</p></li>
<li><p><strong>multi_image</strong> – If True, will train model with multi-image inputs</p></li>
<li><p><strong>validate_on_batch</strong> – Validation will be performed every X batches</p></li>
<li><p><strong>val_batch_size</strong> – Batch size to use during validation</p></li>
<li><p><strong>validation_steps</strong> – Number of batches to use for each instance of validation</p></li>
<li><p><strong>max_tiles_per_slide</strong> – If provided, will select only up to this maximum number of tiles from each slide</p></li>
<li><p><strong>min_tiles_per_slide</strong> – If provided, will only evaluate slides with a given minimum number of tiles</p></li>
<li><p><strong>starting_epoch</strong> – Starts training at the specified epoch</p></li>
<li><p><strong>ema_observations</strong> – Number of observations over which to perform exponential moving average smoothing</p></li>
<li><p><strong>ema_smoothing</strong> – Exponential average smoothing value</p></li>
<li><p><strong>steps_per_epoch_override</strong> – If provided, will manually set the number of steps per epoch.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Results dictionary, Keras history object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-slideflow.slide">
<span id="slide"></span><h2>slide<a class="headerlink" href="#module-slideflow.slide" title="Permalink to this headline">¶</a></h2>
<p>This module includes tools to convolutionally section whole slide images into tiles
using python Generators. These tessellated tiles can be exported as JPGs, with or without
data augmentation, or used as input for a trained Tensorflow model. Model predictions
can then be visualized as a heatmap overlay.</p>
<p>Requires: libvips (<a class="reference external" href="https://libvips.github.io/libvips/">https://libvips.github.io/libvips/</a>).</p>
<dl class="py class">
<dt class="sig sig-object py" id="slideflow.slide.ExtractionPDF">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">ExtractionPDF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orientation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'P'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mm'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'A4'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.ExtractionPDF" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.ExtractionPDF.footer">
<span class="sig-name descname"><span class="pre">footer</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.ExtractionPDF.footer" title="Permalink to this definition">¶</a></dt>
<dd><p>Footer to be implemented in your own inherited class</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.slide.ExtractionReport">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">ExtractionReport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reports</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.ExtractionReport" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a PDF report summarizing extracted tiles,
from a collection of tile extraction reports.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.ExtractionReport.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reports</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.ExtractionReport.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reports</strong> – List of SlideReport objects</p></li>
<li><p><strong>tile_px</strong> – Tile size in pixels.</p></li>
<li><p><strong>tile_um</strong> – Tile size in microns.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="slideflow.slide.InvalidTileSplitException">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">InvalidTileSplitException</span></span><a class="headerlink" href="#slideflow.slide.InvalidTileSplitException" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when invalid tile splitting parameters are given to SlideReader.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.slide.JPGslideToVIPS">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">JPGslideToVIPS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.JPGslideToVIPS" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for JPG files, which do not possess separate levels, to preserve openslide-like functions.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.JPGslideToVIPS.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.JPGslideToVIPS.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.slide.OpenslideToVIPS">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">OpenslideToVIPS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.OpenslideToVIPS" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for VIPS to preserve openslide-like functions.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.OpenslideToVIPS.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.OpenslideToVIPS.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.OpenslideToVIPS.get_best_level_for_downsample">
<span class="sig-name descname"><span class="pre">get_best_level_for_downsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">downsample</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.OpenslideToVIPS.get_best_level_for_downsample" title="Permalink to this definition">¶</a></dt>
<dd><p>Return best level to match a given desired downsample.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.OpenslideToVIPS.get_downsampled_image">
<span class="sig-name descname"><span class="pre">get_downsampled_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.OpenslideToVIPS.get_downsampled_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a VIPS image of a given downsample.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.OpenslideToVIPS.read_region">
<span class="sig-name descname"><span class="pre">read_region</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_level_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downsample_level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extract_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.OpenslideToVIPS.read_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts a region from the image at the given downsample level.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.slide.ROIObject">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">ROIObject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.ROIObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Object container for ROI annotations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.ROIObject.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.ROIObject.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.slide.SlideLoader">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">SlideLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb_counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter_lock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Object that loads an SVS slide and makes preparations for tile extraction.
Should not be used directly; this class must be inherited and extended by a child class</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideLoader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb_counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter_lock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideLoader.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideLoader.extract_tiles">
<span class="sig-name descname"><span class="pre">extract_tiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tfrecord_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tiles_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">230</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayspace_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayspace_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'png'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideLoader.extract_tiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Extractes tiles from slide and saves into a TFRecord file or as loose JPG tiles in a directory.
:param tfrecord_dir: If provided, saves tiles into a TFRecord file (named according to slide name) in this directory.
:param tiles_dir: If provided, saves loose JPG tiles into a subdirectory (named according to slide name) in this directory.
:param split_fraction: List of float. If provided, splits the extracted tiles into subsets (e.g. for validation set) using these fractions.</p>
<blockquote>
<div><p>Should add up to 1 (except for fractions of -1). Remaining tiles are split between fractions of “-1”.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>split_names</strong> – List of names to label the split fractions</p></li>
<li><p><strong>whitespace_fraction</strong> – Int from 0-100, representing a percent. Tiles with this percent of pixels classified as “whitespace”
will be skipped during extraction.</p></li>
<li><p><strong>whitespace_threshold</strong> – Int from 0-255, pixel brightness above which a pixel is considered whitespace</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
<li><p><strong>full_core</strong> – Bool. Only used for TMAReader. If true, will extract full image cores regardless of supplied tile micron size.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideLoader.loaded_correctly">
<span class="sig-name descname"><span class="pre">loaded_correctly</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideLoader.loaded_correctly" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if slide loaded correctly without errors; False if otherwise.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideLoader.square_thumb">
<span class="sig-name descname"><span class="pre">square_thumb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">512</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideLoader.square_thumb" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a square thumbnail of the slide, with black bar borders.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>width</strong> – Width/height of thumbnail in pixels.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>PIL image</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideLoader.thumb">
<span class="sig-name descname"><span class="pre">thumb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mpp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideLoader.thumb" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns PIL thumbnail of the slide.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mpp</strong> – Microns-per-pixel of thumbnail (determines size of thumbnail to return)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>PIL image</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.slide.SlideReader">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">SlideReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inside'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_missing_roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomize_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb_counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter_lock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Extension of slideflow.slide.SlideLoader. Loads a slide and its ROI annotations and sets up a tile generator.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideReader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inside'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_missing_roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomize_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb_counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter_lock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideReader.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Path to slide</p></li>
<li><p><strong>size_px</strong> – Size of tiles to extract, in pixels</p></li>
<li><p><strong>size_um</strong> – Size of tiles to extract, in microns</p></li>
<li><p><strong>stride_div</strong> – Stride divisor for tile extraction (1 = no tile overlap; 2 = 50% overlap, etc)</p></li>
<li><p><strong>enable_downsample</strong> – Bool, if True, allows use of downsampled intermediate layers in the slide image pyramid,
which greatly improves tile extraction speed.</p></li>
<li><p><strong>roi_dir</strong> – Directory in which to search for ROI CSV files</p></li>
<li><p><strong>roi_list</strong> – Alternatively, a list of ROI paths can be explicitly provided</p></li>
<li><p><strong>roi_method</strong> – Either inside, outside, or ignore. Determines how ROIs are used to extract tiles</p></li>
<li><p><strong>skip_missing_roi</strong> – Bool, if True, will skip tiles that are missing a ROI file</p></li>
<li><p><strong>silent</strong> – Bool, if True, will hide logging output</p></li>
<li><p><strong>buffer</strong> – Either ‘vmtouch’ or path to directory. If vmtouch, will use vmtouch to preload slide into memory before extraction.
If a directory, slides will be copied to the directory as a buffer before extraction.
Either method vastly improves tile extraction for slides on HDDs by maximizing sequential read speed</p></li>
<li><p><strong>pb</strong> – ProgressBar instance; will update progress bar during tile extraction if provided</p></li>
<li><p><strong>pb_id</strong> – ID of bar in ProgressBar, defaults to 0</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideReader.annotated_thumb">
<span class="sig-name descname"><span class="pre">annotated_thumb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mpp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideReader.annotated_thumb" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns PIL Image of thumbnail with ROI overlay.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mpp</strong> – Microns-per-pixel, used to determine thumbnail size</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>PIL image</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideReader.build_generator">
<span class="sig-name descname"><span class="pre">build_generator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dual_extract</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">230</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayspace_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayspace_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideReader.build_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds generator to supervise extraction of tiles across the slide.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dual_extract</strong> – If true, will extract base image and the surrounding region.</p></li>
<li><p><strong>shuffle</strong> – If true, will shuffle images during extraction</p></li>
<li><p><strong>whitespace_fraction</strong> – Float from 0-1, representing a percent. Tiles with this percent of pixels (or more) classified as “whitespace”
will be skipped during extraction.</p></li>
<li><p><strong>whitespace_threshold</strong> – Int from 0-255, pixel brightness above which a pixel is considered whitespace</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideReader.load_csv_roi">
<span class="sig-name descname"><span class="pre">load_csv_roi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideReader.load_csv_roi" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads CSV ROI from a given path.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideReader.load_json_roi">
<span class="sig-name descname"><span class="pre">load_json_roi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideReader.load_json_roi" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads ROI from a JSON file.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.slide.SlideReport">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">SlideReport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideReport" title="Permalink to this definition">¶</a></dt>
<dd><p>Report to summarize tile extraction from a slide,
including example images of extracted tiles.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideReport.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideReport.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> – List of JPEG image strings (example tiles)</p></li>
<li><p><strong>path</strong> – Path to slide</p></li>
<li><p><strong>data</strong> – Dictionary of slide extraction report metadata</p></li>
<li><p><strong>compress</strong> – Bool, if True, compresses images to reduce image sizes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.SlideReport.image_row">
<span class="sig-name descname"><span class="pre">image_row</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.SlideReport.image_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Merges images into a single row of images</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.slide.TMAReader">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">TMAReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.TMAReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Extension of slideflow.slide.SlideLoader. Loads a TMA-formatted slide, detects tissue cores, and sets up a tile generator.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.TMAReader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pb_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.TMAReader.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Path to slide</p></li>
<li><p><strong>size_px</strong> – Size of tiles to extract, in pixels</p></li>
<li><p><strong>size_um</strong> – Size of tiles to extract, in microns</p></li>
<li><p><strong>stride_div</strong> – Stride divisor for tile extraction (1 = no tile overlap; 2 = 50% overlap, etc)</p></li>
<li><p><strong>enable_downsample</strong> – Bool, if True, allows use of downsampled intermediate layers in the slide image pyramid,
which greatly improves tile extraction speed.</p></li>
<li><p><strong>silent</strong> – Bool, if True, will hide logging output</p></li>
<li><p><strong>buffer</strong> – Either ‘vmtouch’ or path to directory. If vmtouch, will use vmtouch to preload slide into memory before extraction.
If a directory, slides will be copied to the directory as a buffer before extraction.
Either method vastly improves tile extraction for slides on HDDs by maximizing sequential read speed</p></li>
<li><p><strong>pb</strong> – ProgressBar instance; will update progress bar during tile extraction if provided</p></li>
<li><p><strong>pb_id</strong> – ID of bar in ProgressBar, defaults to 0</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.slide.TMAReader.build_generator">
<span class="sig-name descname"><span class="pre">build_generator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">230</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayspace_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayspace_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.TMAReader.build_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds generator to supervise extraction of tiles across the slide.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shuffle</strong> – If true, will shuffle images during extraction</p></li>
<li><p><strong>whitespace_fraction</strong> – Float from 0-1, representing a percent. Tiles with this percent of pixels (or more) classified as “whitespace”
will be skipped during extraction.</p></li>
<li><p><strong>whitespace_threshold</strong> – Int from 0-255, pixel brightness above which a pixel is considered whitespace</p></li>
<li><p><strong>normalizer</strong> – Normalization strategy to use on image tiles</p></li>
<li><p><strong>normalizer_source</strong> – Path to normalizer source image</p></li>
<li><p><strong>export_full_core</strong> – If true, will also save a thumbnail of each fully extracted core.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="slideflow.slide.TileCorruptionError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">TileCorruptionError</span></span><a class="headerlink" href="#slideflow.slide.TileCorruptionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when image normalization fails due to tile corruption.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.slide.slide_extraction_worker">
<span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">slide_extraction_worker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.slide_extraction_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiprocessing working for SlideReader. Extracts a tile at the given coordinates</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.slide.vips2numpy">
<span class="sig-prename descclassname"><span class="pre">slideflow.slide.</span></span><span class="sig-name descname"><span class="pre">vips2numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vi</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.slide.vips2numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a VIPS image into a numpy array</p>
</dd></dl>

</div>
<div class="section" id="module-slideflow.mosaic">
<span id="mosaic"></span><h2>mosaic<a class="headerlink" href="#module-slideflow.mosaic" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="slideflow.mosaic.Mosaic">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.mosaic.</span></span><span class="sig-name descname"><span class="pre">Mosaic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">umap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leniency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expanded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tiles_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'high'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_select</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nearest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_meta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.mosaic.Mosaic" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualization of tiles as mapped using dimensionality reduction.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.mosaic.Mosaic.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">umap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leniency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expanded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tiles_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'high'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_select</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nearest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_meta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.mosaic.Mosaic.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a mosaic map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>umap</strong> – TFRecordMap object</p></li>
<li><p><strong>focus</strong> – List of tfrecords (paths) to highlight on the mosaic</p></li>
<li><p><strong>leniency</strong> – UMAP leniency</p></li>
<li><p><strong>expanded</strong> – If true, will try to fill in blank spots on the UMAP with nearby tiles.
Takes exponentially longer to generate.</p></li>
<li><p><strong>tile_zoom</strong> – Zoom level</p></li>
<li><p><strong>num_tiles_x</strong> – Mosaic map grid size</p></li>
<li><p><strong>resolution</strong> – Resolution of exported figure; either ‘high’, ‘medium’, or ‘low’.</p></li>
<li><p><strong>relative_size</strong> – If True, will physically size grid images in proportion to the
number of tiles within the grid space.</p></li>
<li><p><strong>tile_select</strong> – Determines how to choose a tile for display on each grid space.
Either ‘nearest’ or ‘centroid’.
If nearest, will display tile nearest to center of grid.
If centroid, for each grid, will calculate which tile is nearest
to centroid using data in tile_meta</p></li>
<li><p><strong>tile_meta</strong> – Dictionary. Metadata for tiles, used if tile_select.
Dictionary should have slide names as keys, mapped to
List of metadata (length of list = number of tiles in slide)</p></li>
<li><p><strong>normalizer</strong> – String. Normalizer to apply to images taken from TFRecords.</p></li>
<li><p><strong>normalizer_source</strong> – String, path. Path to image to use as normalizer source.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.mosaic.Mosaic.display">
<span class="sig-name descname"><span class="pre">display</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.mosaic.Mosaic.display" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the mosaic map as an interactive matplotlib figure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.mosaic.Mosaic.focus">
<span class="sig-name descname"><span class="pre">focus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tfrecords</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.mosaic.Mosaic.focus" title="Permalink to this definition">¶</a></dt>
<dd><p>Highlights certain tiles according to a focus list if list provided,
or resets highlighting if no tfrecords provided.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.mosaic.Mosaic.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.mosaic.Mosaic.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the mosaic map figure to the given filename.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.mosaic.Mosaic.save_report">
<span class="sig-name descname"><span class="pre">save_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.mosaic.Mosaic.save_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a report of which tiles (and their corresponding slide)
were displayed on the Mosaic map, in CSV format.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="slideflow.mosaic.MosaicError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.mosaic.</span></span><span class="sig-name descname"><span class="pre">MosaicError</span></span><a class="headerlink" href="#slideflow.mosaic.MosaicError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-slideflow.statistics">
<span id="statistics"></span><h2>statistics<a class="headerlink" href="#module-slideflow.statistics" title="Permalink to this headline">¶</a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="slideflow.statistics.StatisticsError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">StatisticsError</span></span><a class="headerlink" href="#slideflow.statistics.StatisticsError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">TFRecordMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slides</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfrecords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Map of tiles from TFRecords, mapped either explicitly with pre-specified coordinates,
or mapped with dimensionality reduction from post-convolutional layer weights,
as provided from sf.activations.ActivationsVisualizer.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slides</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfrecords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Backend for mapping TFRecords into two dimensional space. Can use an ActivationsVisualizer object
to map TFRecords according to UMAP of activations, or map according to pre-specified coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>slides</strong> – List of slide names</p></li>
<li><p><strong>tfrecords</strong> – List of paths to tfrecords</p></li>
<li><p><strong>cache</strong> – (optional) String, path name. If provided, will cache activations to this PKL file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.calculate_neighbors">
<span class="sig-name descname"><span class="pre">calculate_neighbors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slide_categories</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'kd_tree'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.calculate_neighbors" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Calculates neighbors among tiles in this map, assigning neighboring statistics</dt><dd><p>to tile metadata ‘num_unique_neighbors’ and ‘percent_matching_categories’.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>slide_categories</strong> – Optional, dict mapping slides to categories. If provided, will be used to
calculate ‘percent_matching_categories’ statistic.</p></li>
<li><p><strong>algorithm</strong> – NearestNeighbor algorithm, either ‘kd_tree’, ‘ball_tree’, or ‘brute’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.cluster">
<span class="sig-name descname"><span class="pre">cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_clusters</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs clustering on data and adds to metadata labels. Requires an ActivationsVisualizer backend.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.export_to_csv">
<span class="sig-name descname"><span class="pre">export_to_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.export_to_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Exports calculated UMAP coordinates to csv.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slides</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters map to only show tiles from the given slides.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.from_activations">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_activations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">activations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_slides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_recalculate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low_memory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">umap_dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.from_activations" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes map from an activations visualizer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>activations</strong> – ActivationsVisualizer class</p></li>
<li><p><strong>exclude_slides</strong> – (optional) List of names of slides to exclude from map.</p></li>
<li><p><strong>prediction_filter</strong> – (optional) List. Will restrict predictions to only these provided categories.</p></li>
<li><p><strong>force_recalculate</strong> – (optional) Will force recalculation of umap despite presence of cache.</p></li>
<li><p><strong>use_centroid</strong> – (optional) Will calculate and map centroid activations.</p></li>
<li><p><strong>map_slide</strong> – Either None (default), ‘centroid’, or ‘average’. If none, will map all tiles from each slide.</p></li>
<li><p><strong>cache</strong> – (optional) String, path name. If provided, will cache umap coordinates to this file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.from_precalculated">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_precalculated</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slides</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfrecords</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.from_precalculated" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes map from precalculated coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>slides</strong> – List of slide names</p></li>
<li><p><strong>x</strong> – X coordinates for tfrecords</p></li>
<li><p><strong>y</strong> – Y coordinates for tfrecords</p></li>
<li><p><strong>meta</strong> – List of dicts. Metadata for each point on the map (representing a single tfrecord).</p></li>
<li><p><strong>values</strong> – Values used to overlay colors during plotting.</p></li>
<li><p><strong>tfrecords</strong> – (optional) List of paths to tfrecords. Not required, used to store for use by other objects. <strong>* TODO: REMOVE *</strong></p></li>
<li><p><strong>cache</strong> – (optional) String, path name. If provided, will cache umap coordinates to this PKL file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.get_tiles_in_area">
<span class="sig-name descname"><span class="pre">get_tiles_in_area</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_lower</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_upper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_lower</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_upper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">999</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.get_tiles_in_area" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns dictionary of slide names mapping to tile indices,
or tiles that fall within the specified location on the umap.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.label_by_logits">
<span class="sig-name descname"><span class="pre">label_by_logits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.label_by_logits" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays each point with label equal to the logits (linear from 0-1)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index</strong> – Logit index</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.label_by_slide">
<span class="sig-name descname"><span class="pre">label_by_slide</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slide_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.label_by_slide" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Displays each point as the name of the corresponding slide.</dt><dd><p>If slide_labels is provided, will use this dictionary to label slides.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>slide_labels</strong> – (Optional) Dict mapping slide names to labels.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.label_by_tile_meta">
<span class="sig-name descname"><span class="pre">label_by_tile_meta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">translation_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.label_by_tile_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays each point with label equal a value in tile metadata (e.g. ‘prediction’)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tile_meta</strong> – String, key to metadata from which to read</p></li>
<li><p><strong>translation_dict</strong> – Optional, if provided, will translate the read metadata through this dictionary</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.save_2d_plot">
<span class="sig-name descname"><span class="pre">save_2d_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_float</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-</span> <span class="pre">0.05,</span> <span class="pre">1.05)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-</span> <span class="pre">0.05,</span> <span class="pre">1.05)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.save_2d_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves plot of data to a provided filename.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – Saves image of plot to this file.</p></li>
<li><p><strong>slide_labels</strong> – (optional) Dictionary mapping slide names to labels.</p></li>
<li><p><strong>slide_filter</strong> – (optional) List, restricts map to the provided slides.</p></li>
<li><p><strong>show_tile_meta</strong> – (optional) String (key), if provided, will label tiles
according to this key as provided in the tile-level meta (self.point_meta)</p></li>
<li><p><strong>outcome_labels</strong> – (optional) Dictionary to translate outcomes (provided
via show_tile_meta and point_meta) to human readable label.</p></li>
<li><p><strong>subsample</strong> – (optional) Int, if provided, will only
include this number of tiles on plot (randomly selected)</p></li>
<li><p><strong>title</strong> – (optional) String, title for plot</p></li>
<li><p><strong>cmap</strong> – (optional) Dicionary mapping labels to colors</p></li>
<li><p><strong>use_float</strong> – (optional) Interpret labels as float for linear coloring</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.save_3d_plot">
<span class="sig-name descname"><span class="pre">save_3d_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.save_3d_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a plot of a 3D umap, with the 3rd dimension representing values provided by argument “z”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>z</strong> – Values for z axis (optional).</p></li>
<li><p><strong>node</strong> – Int, node to plot on 3rd axis (optional). Ignored if z is supplied.</p></li>
<li><p><strong>filename</strong> – Filename to save image of plot</p></li>
<li><p><strong>subsample</strong> – (optionanl) int, if provided will subsample data to include only this number of tiles as max</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.statistics.TFRecordMap.show_neighbors">
<span class="sig-name descname"><span class="pre">show_neighbors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">neighbor_AV</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slide</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.TFRecordMap.show_neighbors" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters map to only show neighbors with a corresponding neighbor ActivationsVisualizer and neighbor slide.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>neighbor_AV</strong> – ActivationsVisualizer containing activations for neighboring slide</p></li>
<li><p><strong>slide</strong> – Name of neighboring slide</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.basic_metrics">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">basic_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.basic_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates basic performance metrics, including sensitivity, specificity, and accuracy.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.calculate_centroid">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">calculate_centroid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slide_node_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.calculate_centroid" title="Permalink to this definition">¶</a></dt>
<dd><p>Calcultes slide-level centroid indices for a provided slide-node dict.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.gen_umap">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">gen_umap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_components</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_neighbors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cosine'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low_memory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.gen_umap" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates and returns a umap from a given array.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.generate_combined_roc">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">generate_combined_roc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ROC'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.generate_combined_roc" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates and saves overlapping ROCs with a given combination of y_true and y_pred.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.generate_roc">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">generate_roc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ROC'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.generate_roc" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates and saves an ROC with a given set of y_true, y_pred values.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.generate_scatter">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">generate_scatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_plot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.generate_scatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate and save scatter plots and calculate R2 statistic for each outcome variable.
y_true and y_pred are both 2D arrays; the first dimension is each observation,
the second dimension is each outcome variable.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.generate_tile_roc">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">generate_tile_roc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">histogram</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.generate_tile_roc" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates tile-level ROC. Defined as a separate function for use with multiprocessing.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.get_average_by_group">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">get_average_by_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique_groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_to_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_true_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_cat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_predictions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'group'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.get_average_by_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to generate group-level averages (e.g. slide-level or patient-level).</p>
<p>For a given tile-level prediction array, calculate spercent predictions
in each outcome by group (e.g. patient, slide), and saves to CSV if specified.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.get_centroid_index">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">get_centroid_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.get_centroid_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate index of centroid from a given two-dimensional input array.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.metrics_from_dataset">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">metrics_from_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">histogram</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_predictions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.metrics_from_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate performance of a given model on a given TFRecord dataset,
generating a variety of statistical outcomes and graphs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evaluate</strong> (<em>model                                           Keras model to</em>) – </p></li>
<li><p><strong>items</strong> (<em>dataset         TFRecord dataset which include three</em>) – raw image data, labels, and slide names.</p></li>
<li><p><strong>patients</strong> (<em>annotations                                     dictionary mapping slidenames to</em>) – </p></li>
<li><p><strong>'categorical'</strong> (<em>model_type                                      'linear' or</em>) – </p></li>
<li><p><strong>graphs</strong> (<em>data_dir                                        directory in which to save performance metrics and</em>) – </p></li>
<li><p><strong>label</strong> (<em>optional</em>) – </p></li>
<li><p><strong>manifest</strong> (<em>optional</em>) – </p></li>
<li><p><strong>min_tiles_per_slide</strong> (<em>optional</em>) – </p></li>
<li><p><strong>num_tiles</strong> (<em>optional</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>auc, r_squared, c_index</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.metrics_from_predictions">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">metrics_from_predictions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_to_slides</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_predictions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">histogram</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.metrics_from_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>For multiple outcomes, y_true and y_pred are expected to be a list of numpy arrays (each numpy array corresponding to whole-dataset predictions for a single outcome)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.normalize_layout">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">normalize_layout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">layout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_percentile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_percentile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">99</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.normalize_layout" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes outliers and scales layout to between [0,1].</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.permutation_feature_importance">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">permutation_feature_importance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_with_slidenames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_tiles_per_slide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_sizes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_images</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.permutation_feature_importance" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Calculate metrics (tile, slide, and patient AUC) from a given model that accepts clinical, slide-level feature</dt><dd><p>inputs, and permute to find relative feature performance.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evaluate</strong> (<em>model                                           Keras model to</em>) – </p></li>
<li><p><strong>items</strong> (<em>dataset_with_slidenames         TFRecord dataset which include three</em>) – raw image data, labels, and slide names.</p></li>
<li><p><strong>patients</strong> (<em>annotations                                     dictionary mapping slidenames to</em>) – </p></li>
<li><p><strong>'categorical'</strong> (<em>model_type                                      'linear' or</em>) – </p></li>
<li><p><strong>graphs</strong> (<em>data_dir                                        directory in which to save performance metrics and</em>) – </p></li>
<li><p><strong>label</strong> (<em>optional</em>) – </p></li>
<li><p><strong>manifest</strong> (<em>optional</em>) – </p></li>
<li><p><strong>min_tiles_per_slide</strong> (<em>optional</em>) – </p></li>
<li><p><strong>num_tiles</strong> (<em>optional</em>) – </p></li>
<li><p><strong>features.</strong> (<em>feature_sizes                           Sizes for each of the clinical input</em>) – </p></li>
<li><p><strong>features.</strong> – </p></li>
<li><p><strong>True</strong> (<em>drop_images                                     Bool. If</em>) – </p></li>
<li><p><strong>model</strong> (<em>will exclude images from</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictiory of AUCs with keys ‘tile’, ‘slide’, and ‘patient’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.predict_from_model">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">predict_from_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.predict_from_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates predictions (y_true, y_pred, tile_to_slide) from a given model and dataset.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.read_predictions">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">read_predictions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictions_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.read_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads predictions from a previously saved CSV file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.save_histogram">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">save_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'histogram'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.save_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates histogram of y_pred, labeled by y_true</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.statistics.to_onehot">
<span class="sig-prename descclassname"><span class="pre">slideflow.statistics.</span></span><span class="sig-name descname"><span class="pre">to_onehot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_cat</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.statistics.to_onehot" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts value to one-hot encoding</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>val</strong> – Value to encode</p></li>
<li><p><strong>num_cat</strong> – Maximum value (length of onehot encoding)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-slideflow.util">
<span id="util"></span><h2>util<a class="headerlink" href="#module-slideflow.util" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="slideflow.util.Logger">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">Logger</span></span><a class="headerlink" href="#slideflow.util.Logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Logging class to handle console and file logging output.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.util.Logger.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.Logger.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.util.Logger.configure">
<span class="sig-name descname"><span class="pre">configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.Logger.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures logger to record the designated logging levels, overriding defaults.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.util.ProgressBar">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">ProgressBar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ending_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_eta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leadtext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp_counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp_lock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.ProgressBar" title="Permalink to this definition">¶</a></dt>
<dd><p>Flexible progress bar with dynamic ETA monitoring.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.util.ProgressBar.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ending_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_eta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leadtext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp_counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp_lock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.ProgressBar.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="slideflow.util.StainNormalizer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">StainNormalizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'macenko'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.StainNormalizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Object to supervise stain normalization for images and
efficiently convert between common image types.</p>
<dl class="py method">
<dt class="sig sig-object py" id="slideflow.util.StainNormalizer.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'macenko'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.StainNormalizer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializer. Establishes normalization method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> – Either ‘macenko’, ‘reinhard’, or ‘vahadane’.</p></li>
<li><p><strong>source</strong> – Path to source image for normalizer.
If not provided, defaults to an internal example image.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.util.StainNormalizer.jpeg_to_jpeg">
<span class="sig-name descname"><span class="pre">jpeg_to_jpeg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jpeg_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.StainNormalizer.jpeg_to_jpeg" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-normalized compressed JPG string data -&gt; normalized compressed JPG string data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.util.StainNormalizer.jpeg_to_rgb">
<span class="sig-name descname"><span class="pre">jpeg_to_rgb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jpeg_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.StainNormalizer.jpeg_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-normalized compressed JPG string data -&gt; normalized RGB numpy array</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.util.StainNormalizer.pil_to_pil">
<span class="sig-name descname"><span class="pre">pil_to_pil</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.StainNormalizer.pil_to_pil" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-normalized PIL.Image -&gt; normalized PIL.Image</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.util.StainNormalizer.rgb_to_rgb">
<span class="sig-name descname"><span class="pre">rgb_to_rgb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.StainNormalizer.rgb_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-normalized RGB numpy array -&gt; normalized RGB numpy array</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="slideflow.util.StainNormalizer.tf_to_rgb">
<span class="sig-name descname"><span class="pre">tf_to_rgb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.StainNormalizer.tf_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-normalized tensorflow image array -&gt; normalized RGB numpy array</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.choice_input">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">choice_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">prompt</span></em>, <em class="sig-param"><span class="pre">valid_choices</span></em>, <em class="sig-param"><span class="pre">default=None</span></em>, <em class="sig-param"><span class="pre">multi_choice=False</span></em>, <em class="sig-param"><span class="pre">input_type=&lt;class</span> <span class="pre">'str'&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.choice_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompts user for multi-choice input.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.dir_input">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">dir_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_on_invalid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">absolute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.dir_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompts user for directory input.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.file_input">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">file_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filetype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.file_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompts user for file input.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.float_input">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">float_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.float_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompts user for float input.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.get_slide_paths">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">get_slide_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slides_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.get_slide_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all slide paths from a given directory containing slides.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.global_path">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">global_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.global_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns global path from a local path.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.int_input">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">int_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.int_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompts user for int input.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.load_json">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">load_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.load_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads JSON data from file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.make_dir">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">make_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.make_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a directory if one does not already exist, in a manner compatible with multithreading.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.path_to_ext">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">path_to_ext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.path_to_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns extension of a file path string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.path_to_name">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">path_to_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.path_to_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns name of a file, without extension, from a given full path string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.read_annotations">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">read_annotations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">annotations_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.read_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Read an annotations file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.read_predictions_from_csv">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">read_predictions_from_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restrict_outcomes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'categorical'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.read_predictions_from_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to assist with loading predictions from files.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dictionary mapping slides to nested dictionary, which maps outcome labels to predictions.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.update_results_log">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">update_results_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results_log_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.update_results_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamically update results_log when recording training metrics.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.write_json">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">write_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.write_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes data to JSON file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="slideflow.util.yes_no_input">
<span class="sig-prename descclassname"><span class="pre">slideflow.util.</span></span><span class="sig-name descname"><span class="pre">yes_no_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'no'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.util.yes_no_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompts user for yes/no input.</p>
</dd></dl>

</div>
<div class="section" id="module-slideflow.experimental">
<span id="experimental"></span><h2>experimental<a class="headerlink" href="#module-slideflow.experimental" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="slideflow.experimental.extract_dual_tiles">
<span class="sig-prename descclassname"><span class="pre">slideflow.experimental.</span></span><span class="sig-name descname"><span class="pre">extract_dual_tiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride_div</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalizer_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#slideflow.experimental.extract_dual_tiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Experimental function to extract dual tiles at two different px/um sizes, saving both within the same TFRecord.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="appendix.html" class="btn btn-neutral float-left" title="Appendix" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, James M Dolezal.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>